import{r,j as e,u as ce,L as de}from"./index-73FoUPY2.js";import{P as me}from"./routes-DmKF3Qpy.js";import{a as B}from"./index-B9ygI19o.js";import{C as he}from"./ConfirmModal-BgI8Vsz2.js";async function fe(i){return(await B.post("/api/register/validate-username",{username:i})).data}async function ue(i,n){return(await B.post("/api/register/validate-idcard",{idCardType:i,idCardNumber:n})).data}async function pe(i){return(await B.post("/api/register",i)).data}async function ge(i){return(await B.post("/api/register/send-verification-code",i)).data}async function xe(i){return(await B.post("/api/register/complete",i)).data}const G=({options:i,value:n,placeholder:x,onChange:c,disabled:u=!1,testId:j="select-dropdown"})=>{const[d,m]=r.useState(!1),o=r.useRef(null);r.useEffect(()=>{const t=N=>{o.current&&!o.current.contains(N.target)&&m(!1)},l=N=>{N.key==="Escape"&&m(!1)};return d&&(document.addEventListener("mousedown",t),document.addEventListener("keydown",l)),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",l)}},[d]);const p=t=>{u||(t.stopPropagation(),m(!d))},g=t=>{u||(c(t),m(!1))},M=t=>{t.key==="Enter"&&p(t)};return e.jsxs("div",{ref:o,className:`select-dropdown ${u?"disabled":""} ${d?"expanded":""}`,"data-testid":j,onClick:p,onKeyDown:M,tabIndex:u?-1:0,children:[e.jsx("div",{className:"selected-value-display",children:n||x}),e.jsx("input",{type:"hidden",value:n||x,readOnly:!0}),e.jsx("span",{"data-testid":"dropdown-arrow",className:`arrow ${d?"rotated":""}`,children:"â–¼"}),d&&!u&&i.length>0&&e.jsx("div",{className:"options-list",children:i.map((t,l)=>e.jsx("div",{className:`option ${t===n?"selected":""}`,onClick:N=>{N.stopPropagation(),g(t)},children:t},l))})]})},ke=({onSubmit:i})=>{const[n,x]=r.useState(""),[c,u]=r.useState(""),[j,d]=r.useState(""),[m,o]=r.useState("å±…æ°‘èº«ä»½è¯"),[p,g]=r.useState(""),[M,t]=r.useState(""),[l,N]=r.useState("æˆäºº"),[I,F]=r.useState(""),[T,y]=r.useState(""),[S,$]=r.useState(!1),[k,f]=r.useState({isValid:!1,errorMessage:"",showCheckmark:!1}),[v,R]=r.useState({isValid:!1,errorMessage:"",showCheckmark:!1}),[b,D]=r.useState({isValid:!1,errorMessage:"",showCheckmark:!1}),[L,q]=r.useState({isValid:!1,errorMessage:"",showCheckmark:!1}),[A,E]=r.useState({isValid:!1,errorMessage:"",showCheckmark:!1}),[z,K]=r.useState({isValid:!1,errorMessage:"",showCheckmark:!1}),[Z,U]=r.useState({isValid:!1,errorMessage:"",showCheckmark:!1}),[H,V]=r.useState(""),W=["å±…æ°‘èº«ä»½è¯","æ¸¯æ¾³å±…æ°‘å±…ä½è¯","å°æ¹¾å±…æ°‘å±…ä½è¯","å¤–å›½äººæ°¸ä¹…å±…ç•™èº«ä»½è¯","å¤–å›½æŠ¤ç…§","ä¸­å›½æŠ¤ç…§","æ¸¯æ¾³å±…æ°‘æ¥å¾€å†…åœ°é€šè¡Œè¯","å°æ¹¾å±…æ°‘æ¥å¾€å¤§é™†é€šè¡Œè¯"],X=["æˆäºº","å„¿ç«¥","å­¦ç”Ÿ","æ®‹ç–¾å†›äºº"],J=async s=>{var w,C;if(!s){f({isValid:!1,errorMessage:"",showCheckmark:!1});return}if(s.length<6){f({isValid:!1,errorMessage:"ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äºŽ6ä¸ªå­—ç¬¦ï¼",showCheckmark:!1});return}if(s.length>30){f({isValid:!1,errorMessage:"ç”¨æˆ·åé•¿åº¦ä¸èƒ½è¶…è¿‡30ä¸ªå­—ç¬¦ï¼",showCheckmark:!1});return}if(!/^[a-zA-Z][a-zA-Z0-9_]*$/.test(s)){f({isValid:!1,errorMessage:"ç”¨æˆ·ååªèƒ½ç”±å­—æ¯ã€æ•°å­—å’Œ_ç»„æˆï¼Œé¡»ä»¥å­—æ¯å¼€å¤´ï¼",showCheckmark:!1});return}try{const h=await fe(s);h.valid?f({isValid:!0,errorMessage:"",showCheckmark:!0}):f({isValid:!1,errorMessage:h.error,showCheckmark:!1})}catch(h){const P=((C=(w=h.response)==null?void 0:w.data)==null?void 0:C.error)||"éªŒè¯å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•";f({isValid:!1,errorMessage:P,showCheckmark:!1})}},Q=async s=>{if(!s){R({isValid:!1,errorMessage:"",showCheckmark:!1});return}if(s.length<6){R({isValid:!1,errorMessage:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äºŽ6ä¸ªå­—ç¬¦ï¼",showCheckmark:!1});return}if(!/^[a-zA-Z0-9_]+$/.test(s)){R({isValid:!1,errorMessage:"æ ¼å¼é”™è¯¯ï¼Œå¿…é¡»ä¸”åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ä¸­çš„ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šï¼",showCheckmark:!1});return}const w=/[a-zA-Z]/.test(s),C=/[0-9]/.test(s),h=/_/.test(s);if((w?1:0)+(C?1:0)+(h?1:0)<2){R({isValid:!1,errorMessage:"æ ¼å¼é”™è¯¯ï¼Œå¿…é¡»ä¸”åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ä¸­çš„ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šï¼",showCheckmark:!1});return}R({isValid:!0,errorMessage:"",showCheckmark:!0})},Y=s=>{if(!s){D({isValid:!1,errorMessage:"",showCheckmark:!1});return}if(s!==c){D({isValid:!1,errorMessage:"ç¡®è®¤å¯†ç ä¸Žå¯†ç ä¸ä¸€è‡´ï¼",showCheckmark:!1});return}D({isValid:!0,errorMessage:"",showCheckmark:!0})},ee=s=>{if(!s){q({isValid:!1,errorMessage:"",showCheckmark:!1});return}const a=s.split("").reduce((C,h)=>C+(/[\u4e00-\u9fa5]/.test(h)?2:1),0);if(a<3||a>30){q({isValid:!1,errorMessage:"å…è®¸è¾“å…¥çš„å­—ç¬¦ä¸²åœ¨3-30ä¸ªå­—ç¬¦ä¹‹é—´ï¼",showCheckmark:!1});return}if(!/^[\u4e00-\u9fa5a-zA-Z.\s]+$/.test(s)){q({isValid:!1,errorMessage:"è¯·è¾“å…¥å§“åï¼",showCheckmark:!1});return}q({isValid:!0,errorMessage:"",showCheckmark:!0})},se=s=>{const a=s.substring(0,17);if(!/^\d{17}$/.test(a))return!1;const w=s.charAt(17).toUpperCase(),C=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],h=["1","0","X","9","8","7","6","5","4","3","2"];let P=0;for(let _=0;_<17;_++)P+=parseInt(a.charAt(_))*C[_];const oe=P%11,le=h[oe];return w===le},re=async s=>{var w,C;if(!s){E({isValid:!1,errorMessage:"",showCheckmark:!1});return}if(!/^[a-zA-Z0-9]+$/.test(s)){E({isValid:!1,errorMessage:"è¾“å…¥çš„è¯ä»¶ç¼–å·ä¸­åŒ…å«ä¸­æ–‡ä¿¡æ¯æˆ–ç‰¹æ®Šå­—ç¬¦ï¼",showCheckmark:!1});return}if(s.length!==18){E({isValid:!1,errorMessage:"è¯·æ­£ç¡®è¾“å…¥18ä½è¯ä»¶å·ç ï¼",showCheckmark:!1});return}if(!se(s)){E({isValid:!1,errorMessage:"è¯·æ­£ç¡®è¾“å…¥18ä½è¯ä»¶å·ç ï¼",showCheckmark:!1});return}try{const h=await ue(m,s);h.valid?E({isValid:!0,errorMessage:"",showCheckmark:!0}):E({isValid:!1,errorMessage:h.error,showCheckmark:!1})}catch(h){const P=((C=(w=h.response)==null?void 0:w.data)==null?void 0:C.error)||"éªŒè¯å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•";E({isValid:!1,errorMessage:P,showCheckmark:!1})}},ae=s=>{if(!s){K({isValid:!1,errorMessage:"",showCheckmark:!1});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){K({isValid:!1,errorMessage:"è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ï¼",showCheckmark:!1});return}K({isValid:!0,errorMessage:"",showCheckmark:!1})},te=s=>{if(!s){U({isValid:!1,errorMessage:"",showCheckmark:!1});return}if(!/^[0-9]+$/.test(s)){U({isValid:!1,errorMessage:"æ‚¨è¾“å…¥çš„æ‰‹æœºå·ç ä¸æ˜¯æœ‰æ•ˆçš„æ ¼å¼ï¼",showCheckmark:!1});return}if(s.length!==11){U({isValid:!1,errorMessage:"æ‚¨è¾“å…¥çš„æ‰‹æœºå·ç ä¸æ˜¯æœ‰æ•ˆçš„æ ¼å¼ï¼",showCheckmark:!1});return}U({isValid:!0,errorMessage:"",showCheckmark:!1})},ie=s=>{y(s.slice(0,11))},ne=async s=>{if(s.preventDefault(),V(""),!S){V("è¯·ç¡®è®¤æœåŠ¡æ¡æ¬¾ï¼");return}const a=[];if(n||a.push("ç”¨æˆ·å"),c||a.push("ç™»å½•å¯†ç "),j||a.push("ç¡®è®¤å¯†ç "),p||a.push("å§“å"),M||a.push("è¯ä»¶å·ç "),T||a.push("æ‰‹æœºå·ç "),a.length>0){V("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼");return}if(k.errorMessage){V("ç”¨æˆ·åéªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹¶é‡æ–°è¾“å…¥");return}if(v.errorMessage){V("å¯†ç éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹¶é‡æ–°è¾“å…¥");return}if(b.errorMessage){V("ç¡®è®¤å¯†ç éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹¶é‡æ–°è¾“å…¥");return}if(L.errorMessage){V("å§“åéªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹¶é‡æ–°è¾“å…¥");return}if(A.errorMessage){V("è¯ä»¶å·ç éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹¶é‡æ–°è¾“å…¥");return}if(Z.errorMessage){V("æ‰‹æœºå·ç éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹¶é‡æ–°è¾“å…¥");return}if(z.errorMessage&&I){V("é‚®ç®±éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¹¶é‡æ–°è¾“å…¥");return}i({username:n,password:c,confirmPassword:j,idCardType:m,name:p,idCardNumber:M,discountType:l,email:I,phone:T,agreedToTerms:S})},O=(s=>{if(!s||s.length===0)return 0;if(s.length<6)return 1;let a=0;return/[a-z]/.test(s)&&a++,/[A-Z]/.test(s)&&a++,/[0-9]/.test(s)&&a++,/[_]/.test(s)&&a++,Math.min(a,3)})(c);return e.jsxs("div",{className:"register-form-container",children:[H&&e.jsx("div",{className:"general-error-message",children:H}),e.jsxs("form",{className:"register-form",onSubmit:ne,children:[e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"required-mark",children:"*"}),"ç”¨æˆ·åï¼š"]})}),e.jsxs("div",{className:"form-input-container",children:[e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx("input",{className:`form-input ${k.errorMessage?"error":k.showCheckmark?"valid":""}`,type:"text",placeholder:"ç”¨æˆ·åè®¾ç½®æˆåŠŸåŽä¸å¯ä¿®æ”¹",value:n,onChange:s=>x(s.target.value),onBlur:()=>J(n)}),k.showCheckmark&&e.jsx("span",{className:"input-checkmark","data-testid":"username-checkmark",children:"âœ“"}),e.jsx("span",{className:"form-hint-message",children:'6-30ä½å­—æ¯ã€æ•°å­—æˆ–"_"ï¼Œå­—æ¯å¼€å¤´'})]}),k.errorMessage&&e.jsx("div",{className:"form-error-message",children:k.errorMessage})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"required-mark",children:"*"}),"ç™»å½•å¯†ç ï¼š"]})}),e.jsxs("div",{className:"form-input-container",children:[e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx("input",{className:`form-input ${v.errorMessage?"error":v.showCheckmark?"valid":""}`,type:"password",placeholder:"6-20ä½å­—æ¯ã€æ•°å­—æˆ–ç¬¦å·",value:c,onChange:s=>u(s.target.value),onBlur:()=>Q(c)}),v.showCheckmark&&e.jsx("span",{className:"input-checkmark","data-testid":"password-checkmark",children:"âœ“"}),e.jsx("div",{className:"password-strength",children:e.jsxs("div",{className:"strength-bars",children:[e.jsx("div",{className:`strength-bar ${O>=1?"weak":""}`}),e.jsx("div",{className:`strength-bar ${O>=2?"medium":""}`}),e.jsx("div",{className:`strength-bar ${O>=3?"strong":""}`})]})})]}),v.errorMessage&&e.jsx("div",{className:"form-error-message",children:v.errorMessage})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"required-mark",children:"*"}),"ç¡®è®¤å¯†ç ï¼š"]})}),e.jsxs("div",{className:"form-input-container",children:[e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx("input",{className:`form-input ${b.errorMessage?"error":b.showCheckmark?"valid":""}`,type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ‚¨çš„ç™»å½•å¯†ç ",value:j,onChange:s=>d(s.target.value),onBlur:()=>Y(j)}),b.showCheckmark&&e.jsx("span",{className:"input-checkmark","data-testid":"confirm-password-checkmark",children:"âœ“"})]}),b.errorMessage&&e.jsx("div",{className:"form-error-message",children:b.errorMessage})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"required-mark",children:"*"}),"è¯ä»¶ç±»åž‹ï¼š"]})}),e.jsx("div",{className:"form-input-container",children:e.jsx(G,{options:W,value:m,placeholder:"å±…æ°‘èº«ä»½è¯",onChange:o,testId:"id-card-type-dropdown"})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"required-mark",children:"*"}),"å§“åï¼š"]})}),e.jsxs("div",{className:"form-input-container",children:[e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx("input",{className:`form-input ${L.errorMessage?"error":L.showCheckmark?"valid":""}`,type:"text",placeholder:"è¯·è¾“å…¥å§“å",value:p,onChange:s=>g(s.target.value),onBlur:()=>ee(p)}),L.showCheckmark&&e.jsx("span",{className:"input-checkmark","data-testid":"name-checkmark",children:"âœ“"}),e.jsx("span",{className:"form-hint-message",children:"å§“åå¡«å†™è§„åˆ™ï¼ˆç”¨äºŽèº«ä»½æ ¸éªŒï¼Œè¯·æ­£ç¡®å¡«å†™çœŸå®žå§“åï¼‰"})]}),L.errorMessage&&e.jsx("div",{className:"form-error-message",children:L.errorMessage})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"required-mark",children:"*"}),"è¯ä»¶å·ç ï¼š"]})}),e.jsxs("div",{className:"form-input-container",children:[e.jsxs("div",{className:"form-input-wrapper",children:[e.jsx("input",{className:`form-input ${A.errorMessage?"error":A.showCheckmark?"valid":""}`,type:"text",placeholder:"è¯·è¾“å…¥æ‚¨çš„è¯ä»¶å·ç ",value:M,onChange:s=>t(s.target.value),onBlur:()=>re(M)}),A.showCheckmark&&e.jsx("span",{className:"input-checkmark","data-testid":"id-card-checkmark",children:"âœ“"}),e.jsx("span",{className:"form-hint-message",children:"ï¼ˆç”¨äºŽèº«ä»½æ ¸éªŒï¼Œè¯·æ­£ç¡®å¡«å†™ï¼‰"})]}),A.errorMessage&&e.jsx("div",{className:"form-error-message",children:A.errorMessage})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsx("label",{className:"form-label",children:"ä¼˜æƒ ï¼ˆå¾…ï¼‰ç±»åž‹ï¼š"})}),e.jsx("div",{className:"form-input-container",children:e.jsx(G,{options:X,value:l,placeholder:"æˆäºº",onChange:N,testId:"discount-type-dropdown"})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsx("label",{className:"form-label",children:"é‚®ç®±ï¼š"})}),e.jsxs("div",{className:"form-input-container",children:[e.jsx("div",{className:"form-input-wrapper",children:e.jsx("input",{className:`form-input ${z.errorMessage?"error":""}`,type:"email",placeholder:"è¯·æ­£ç¡®å¡«å†™æ‚¨çš„é‚®ç®±åœ°å€",value:I,onChange:s=>F(s.target.value),onBlur:()=>ae(I)})}),z.errorMessage&&e.jsx("div",{className:"form-error-message",children:z.errorMessage})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-label-wrapper",children:e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"required-mark",children:"*"}),"æ‰‹æœºå·ç ï¼š"]})}),e.jsxs("div",{className:"form-input-container",children:[e.jsxs("div",{className:"form-input-wrapper",children:[e.jsxs("div",{className:"phone-input-wrapper",children:[e.jsx("div",{className:"phone-country-select",children:e.jsx(G,{options:["+86 ä¸­å›½"],value:"+86 ä¸­å›½",placeholder:"+86 ä¸­å›½",onChange:()=>{},testId:"country-code-dropdown"})}),e.jsx("input",{className:`form-input phone-input ${Z.errorMessage?"error":""}`,type:"tel",placeholder:"æ‰‹æœºå·ç ",value:T,onChange:s=>ie(s.target.value),onBlur:()=>te(T),maxLength:11})]}),e.jsx("span",{className:"form-hint-message",children:"è¯·æ­£ç¡®å¡«å†™æ‰‹æœºå·ç ï¼Œç¨åŽå°†å‘è¯¥æ‰‹æœºå·å‘é€çŸ­ä¿¡éªŒè¯ç "})]}),Z.errorMessage&&e.jsx("div",{className:"form-error-message",children:Z.errorMessage})]})]}),e.jsx("div",{className:"agreement-section",children:e.jsxs("div",{className:"agreement-wrapper",children:[e.jsx("input",{type:"checkbox",className:"agreement-checkbox",checked:S,onChange:s=>$(s.target.checked)}),e.jsxs("span",{className:"agreement-text",children:["æˆ‘å·²é˜…è¯»å¹¶åŒæ„éµå®ˆ"," ",e.jsx("a",{href:"/service-terms",className:"agreement-link",onClick:s=>s.preventDefault(),children:"ã€Šä¸­å›½é“è·¯å®¢æˆ·æœåŠ¡ä¸­å¿ƒç½‘ç«™æœåŠ¡æ¡æ¬¾ã€‹"})," ",e.jsx("a",{href:"/privacy-policy",className:"agreement-link",onClick:s=>s.preventDefault(),children:"ã€Šéšç§æƒæ”¿ç­–ã€‹"})]})]})}),e.jsx("div",{className:"submit-section",children:e.jsx("button",{type:"submit",className:"submit-button",children:"ä¸‹ä¸€æ­¥"})})]})]})},je=({phoneNumber:i,onClose:n,onComplete:x,onBack:c,isSuccess:u=!1,successMessage:j="",externalError:d=""})=>{const[m,o]=r.useState(""),[p,g]=r.useState(""),M=l=>{if(l.preventDefault(),g(""),!m){g("è¯·è¾“å…¥éªŒè¯ç ");return}if(m.length!==6){g("éªŒè¯ç åº”ä¸º6ä½æ•°å­—");return}x(m)},t=l=>{l.target===l.currentTarget&&n()};return e.jsx("div",{className:"reg-verification-modal-backdrop",onClick:t,children:e.jsxs("div",{className:"reg-verification-modal",children:[e.jsxs("div",{className:"reg-verification-modal-header",children:[e.jsx("h3",{children:"æ‰‹æœºéªŒè¯"}),e.jsx("button",{className:"close-button",onClick:n,"aria-label":"å…³é—­",children:"Ã—"})]}),e.jsx("div",{className:"reg-verification-modal-content",children:u?e.jsxs("div",{className:"success-content",children:[e.jsx("div",{className:"success-icon",children:"âœ“"}),e.jsx("p",{className:"success-message",children:j})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"instruction-box",role:"note","aria-label":"æ‰‹æœºåŒå‘éªŒè¯è¯´æ˜Ž",children:[e.jsx("div",{className:"instruction-icon","aria-hidden":"true",children:"ðŸ‘¤"}),e.jsxs("div",{className:"instruction-content",children:["ä¸ºäº†ä¿æŠ¤æ‚¨çš„ä¿¡æ¯å®‰å…¨ï¼Œä¾¿äºŽä»ŠåŽä¸ºæ‚¨æœåŠ¡ï¼Œè¯·æŒ‰ä»¥ä¸‹ç¨‹åºè¿›è¡Œæ‰‹æœºåŒå‘æ ¸éªŒï¼š",e.jsx("br",{}),e.jsx("strong",{children:"ç¬¬ä¸€æ­¥ï¼š"}),"è¯·ä½¿ç”¨æ‰‹æœºå‘12306å‘é€çŸ­ä¿¡â€œ999â€ï¼Œä»¥ä¾¿ç¡®è®¤æ‚¨çš„æ‰‹æœºå¯ä»¥è”ç»œã€‚",e.jsx("br",{}),e.jsx("strong",{children:"ç¬¬äºŒæ­¥ï¼š"}),"12306æŽ¥æ”¶åˆ°çŸ­ä¿¡åŽå°†ç»™æ‚¨çš„æ‰‹æœºå›žå¤å…­ä½æ•°å­—çŸ­ä¿¡ï¼Œè¯·æ‚¨åœ¨ååˆ†é’Ÿå†…å°†å…­ä½æ•°å­—çŸ­ä¿¡å¡«å†™åœ¨ä¸‹æ–¹ç©ºç™½æ¡†ä¸­ï¼Œå¹¶ç‚¹å‡»â€œå®Œæˆæ³¨å†Œâ€æŒ‰é’®ã€‚"]})]}),e.jsxs("p",{className:"verification-message",children:["éªŒè¯ç å·²å‘é€è‡³",i]}),e.jsxs("form",{className:"verification-form",onSubmit:M,children:[e.jsxs("div",{className:"form-row",children:[e.jsx("label",{className:"form-label",children:"éªŒè¯ç ï¼š"}),e.jsx("input",{type:"text",className:"form-input",value:m,onChange:l=>{const N=l.target.value.replace(/\D/g,"");o(N.slice(0,6)),g("")},maxLength:6,placeholder:"è¯·è¾“å…¥6ä½éªŒè¯ç "})]}),(p||d)&&e.jsx("div",{className:"error-message",children:d||p}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"submit",className:"complete-button",children:"å®Œæˆæ³¨å†Œ"}),e.jsx("button",{type:"button",className:"back-button",onClick:c,children:"è¿”å›žä¿®æ”¹"})]})]})]})})]})})},be=()=>{const i=ce(),[n,x]=r.useState(!1),[c,u]=r.useState(null),[j,d]=r.useState(!1),[m,o]=r.useState(""),[p,g]=r.useState(""),[M,t]=r.useState(!1),l=async y=>{var S,$,k,f;console.log("Registration submitted:",y);try{const R=(await pe(y)).sessionId;if(!R){g("æ³¨å†Œå¤±è´¥ï¼šæœªèŽ·å–åˆ°ä¼šè¯ID");return}u({...y,sessionId:R});try{const D=(await ge({sessionId:R,phone:y.phone})).verificationCode;D&&(console.log(`
=================================`),console.log("ðŸ“± æ³¨å†ŒéªŒè¯ç "),console.log(`æ‰‹æœºå·: ${y.phone}`),console.log(`éªŒè¯ç : ${D}`),console.log("æœ‰æ•ˆæœŸ: 5åˆ†é’Ÿ"),console.log(`=================================
`)),x(!0)}catch(b){console.error("Send verification code error:",b),g((($=(S=b.response)==null?void 0:S.data)==null?void 0:$.error)||"å‘é€éªŒè¯ç å¤±è´¥")}}catch(v){console.error("Registration error:",v),(f=(k=v.response)==null?void 0:k.data)!=null&&f.error?g(v.response.data.error):g("æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}},N=async y=>{var $,k;if(!c){o("æ³¨å†Œä¿¡æ¯ä¸¢å¤±ï¼Œè¯·é‡æ–°æ³¨å†Œ");return}const S=c.sessionId;if(!S){o("ä¼šè¯ä¿¡æ¯ä¸¢å¤±ï¼Œè¯·é‡æ–°æ³¨å†Œ");return}try{o(""),await xe({sessionId:S,smsCode:y}),d(!0),setTimeout(()=>{i(me.login)},2e3)}catch(f){console.error("Verification error:",f),(k=($=f.response)==null?void 0:$.data)!=null&&k.error?o(f.response.data.error):o("éªŒè¯å¤±è´¥ï¼Œè¯·é‡è¯•")}},I=()=>{x(!1),d(!1),o("")},F=()=>{if(j){x(!1),d(!1),u(null),o("");return}t(!0)},T=()=>{i("/login")};return e.jsxs("div",{className:"register-page",children:[e.jsxs("main",{className:"register-main",children:[e.jsxs("div",{className:"breadcrumb",children:["æ‚¨çŽ°åœ¨çš„ä½ç½®ï¼š",e.jsx(de,{to:"/",children:"å®¢è¿é¦–é¡µ"}),e.jsx("span",{className:"breadcrumb-separator",children:">"}),e.jsx("span",{children:"æ³¨å†Œ"})]}),p&&e.jsx("div",{role:"alert","aria-live":"polite",style:{maxWidth:1200,margin:"0 auto 10px",padding:"10px 16px",color:"#a8071a",background:"#fff1f0",border:"1px solid #ffa39e"},children:p}),e.jsxs("div",{className:"register-container",children:[e.jsx("div",{className:"register-header",children:"è´¦æˆ·ä¿¡æ¯"}),e.jsx("div",{className:"register-content",children:e.jsx(ke,{onSubmit:l,onNavigateToLogin:T})})]})]}),n&&c&&e.jsx(je,{phoneNumber:c.phone,onClose:F,onComplete:N,onBack:I,isSuccess:j,successMessage:"æ­å–œæ‚¨æ³¨å†ŒæˆåŠŸï¼æ­£åœ¨è·³è½¬ç™»å½•é¡µ...",externalError:m}),e.jsx(he,{isVisible:M,title:"æç¤º",message:"ç¡®å®šè¦å…³é—­éªŒè¯å¼¹çª—å—ï¼Ÿå…³é—­åŽéœ€è¦é‡æ–°æäº¤æ³¨å†Œä¿¡æ¯ã€‚",confirmText:"ç¡®å®š",cancelText:"å–æ¶ˆ",onConfirm:()=>{t(!1),x(!1),u(null),o("")},onCancel:()=>t(!1)})]})};export{be as default};
