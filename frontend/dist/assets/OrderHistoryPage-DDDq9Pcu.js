import{r as t,j as e}from"./index-73FoUPY2.js";const o=()=>{const[c,l]=t.useState([]),[d,n]=t.useState(!1),[s,i]=t.useState("");return!!localStorage.getItem("authToken")&&(localStorage.getItem("username")||localStorage.getItem("userId")),t.useEffect(()=>{(async()=>{n(!0),i("");try{const a=await(await fetch("/api/orders")).json();l(Array.isArray(a.orders)?a.orders:[])}catch{i("获取订单列表失败")}finally{n(!1)}})()},[]),e.jsx("div",{className:"order-history-page",children:e.jsxs("div",{style:{padding:16},children:[e.jsx("h2",{children:"我的订单"}),d&&e.jsx("div",{children:"加载中..."}),s&&e.jsx("div",{children:s}),!d&&!s&&e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"订单号"}),e.jsx("th",{children:"车次"}),e.jsx("th",{children:"出发"}),e.jsx("th",{children:"到达"}),e.jsx("th",{children:"日期"}),e.jsx("th",{children:"席别"}),e.jsx("th",{children:"数量"}),e.jsx("th",{children:"总价"}),e.jsx("th",{children:"状态"})]})}),e.jsx("tbody",{children:c.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.order_number}),e.jsx("td",{children:r.train_no}),e.jsx("td",{children:r.origin}),e.jsx("td",{children:r.destination}),e.jsx("td",{children:r.departure_date}),e.jsx("td",{children:r.seat_type}),e.jsx("td",{children:r.quantity}),e.jsx("td",{children:r.total_price}),e.jsx("td",{children:r.status})]},r.id))})]})]})})};export{o as default};
