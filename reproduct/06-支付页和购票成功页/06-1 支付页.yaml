- id: REQ-11
  name: 订单支付页
  description: 用户确认订单信息并进行支付的页面
  functional_description: 提供订单信息确认、席位锁定倒计时、支付入口、取消订单入口及相关提示功能。
  ui_description: |
    整体布局分为四部分：顶部导航栏区域、席位锁定时效倒计时区域、订单信息与确认支付区、温馨提示面板与广告面板。
    背景白色，主内容区最大宽度1200px。
  children:
  - id: REQ-11.1
    name: 订单支付页布局
    description: 页面各区域的视觉样式和结构
    ui_description: |
      1. 顶部导航栏区域：
         - Logo区域：左上角，包含Logo和"中国铁路12306"字样。
         - 欢迎信息：Logo右侧，显示"欢迎登录12306"。
         - 主导航栏：蓝色背景，包含"车票查询"、"订单查询"等，右侧有登录/注册按钮。
      2. 席位锁定时效倒计时区域：
         - 样式：白色背景，蓝色边框，Flex布局。
         - 内容：锁图标，"席位已锁定..."提示文字，橙色倒计时（xx分xx秒）。
         - 状态：剩余<5分钟变红带脉冲动画；超时背景变浅红，时间显示00分00秒（红色）。
      3. 订单信息与确认支付区：
         - 容器：最大宽度1100px。
         - 标题栏：蓝色渐变背景，白色文字"订单信息"。
         - 车次信息行：显示日期（周几）、车次号、起止站（蓝色加粗）、时间（开/到）。
         - 乘车信息表格：
           - 表头：渐变背景，包含序号、姓名、证件类型、证件号码、票种、席别、车厢、席位号、票价。
           - 内容：灰色文字，证件号脱敏，显示车厢号（06车）和席位号（07D号）。
         - 保险区域：展示保险图片。
         - 总票价行：右对齐，显示"总票价："和金额（橙色加粗）。
         - 操作按钮：
           - "取消订单"：白色背景，灰色文字。
           - "网上支付"：橙色背景，白色文字，点击后变更为"处理中..."。
      4. 温馨提示面板：
         - 样式：浅黄色背景，黄色边框。
         - 内容：标题"温馨提示："，有序列表包含支付时限、保险说明、不可控因素说明等。
      5. 底部导航区域：包含友情链接和官方二维码（微信、微博、公众号、App）。
      6. 交易提示弹窗（CancelOrderModal）：
         - 样式：圆角，蓝色渐变标题栏"交易提示"。
         - 内容：问号图标，加粗文字"您确认取消订单吗？"，以及取消限制说明。
         - 按钮："取消"（白底）、"确认"（橙底）。
      7. 超时提示弹窗（TimeoutModal）：
         - 样式：居中，圆角。
         - 内容："支付超时，请重新购票"。
         - 按钮："确认"（橙底）。
  - id: REQ-11.2
    name: 页面跳转逻辑
    description: 进入订单支付页的前置条件
    scenarios:
      - id: SCN-11.2.1
        description: 从订单填写页跳转
        given: 乘客在订单填写页的信息核对弹窗点击确认
        when: 系统分配座位并创建订单（状态：已确认未支付）
        then: |
          数据库设置20分钟时效。
          座位状态由空闲改为已被预定。
          页面跳转至订单支付页，倒计时从20分钟开始。
      - id: SCN-11.2.2
        description: 从未完成订单页跳转
        given: 乘客在未完成订单子页面
        when: 用户点击"去支付"按钮
        then: 跳转至订单支付页，显示剩余有效时间。
  - id: REQ-11.3
    name: 倒计时机制
    description: 订单有效期的倒计时逻辑
    functional_description: |
      订单时效20分钟。
      倒计时每秒更新，格式"xx分xx秒"。
      剩余时间<5分钟：文字变红，有脉冲动画。
      倒计时结束：显示00分00秒，面板背景变浅红，边框变浅红。
  - id: REQ-11.4
    name: 确认支付
    description: 用户点击支付按钮的处理
    scenarios:
      - id: SCN-11.4.1
        description: 正常支付
        given: 订单未超时
        when: 用户点击"网上支付"按钮
        then: |
          按钮显示"处理中..."并禁用。
          调用支付确认API。
          成功后跳转至购票成功页。
          更新数据库订单状态为"已支付"。
          确认座位状态为"已被预定"。
      - id: SCN-11.4.2
        description: 超时支付
        given: 订单已超时（倒计时显示00分00秒）
        when: 用户点击"网上支付"按钮
        then: 弹出超时提示弹窗，点击"确认"跳转至车次列表页。
  - id: REQ-11.5
    name: 取消订单
    description: 用户点击取消订单的处理
    scenarios:
      - id: SCN-11.5.1
        description: 弹出交易提示弹窗
        given: 用户点击"取消订单"按钮
        when: 系统弹出交易提示弹窗
        then: 显示确认取消的询问及限制说明。
      - id: SCN-11.5.2
        description: 确认取消
        given: 用户在弹窗点击"确认"
        when: 调用取消订单API
        then: |
          取消次数+1。
          释放座位（改为空闲）。
          删除订单信息。
          跳转至车次列表页。
      - id: SCN-11.5.3
        description: 放弃取消
        given: 用户在弹窗点击"取消"
        when: 弹窗消失
        then: 返回支付页，倒计时继续运行。
  - id: REQ-11.6
    name: 支付超时处理
    description: 页面停留至倒计时结束的处理
    scenarios:
      - id: SCN-11.6.1
        description: 倒计时自然结束
        given: 用户在支付页停留超过时效
        when: 倒计时归零
        then: |
          倒计时数值固定为"00分00秒"。
          面板背景变浅红。
          数据库释放座位，删除订单。
          点击操作按钮时弹出超时提示弹窗。
  - id: REQ-11.7
    name: 未完成订单检查
    description: 存在未支付订单时的限制
    scenarios:
      - id: SCN-11.7.1
        description: 拦截新购票请求
        given: 数据库中有已确认未支付的订单
        when: 用户在车次列表页尝试预定新票
        then: |
          弹出确认弹窗提示"您还有未处理的订单..."。
          点击链接跳转至未完成订单页。
