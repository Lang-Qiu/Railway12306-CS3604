id: REQ-6
name: 订单信息录入页面
functional_description: 承载用户录入乘车人信息、核对行程并完成订单提交的完整业务流程。
children:
  - id: REQ-6-1
    name: 页面结构布局
    children:
      - id: REQ-6-1-1
        name: 总体架构设计
        ui_description: |
          页面底色设定为白色（white），垂直维度划分为五个核心功能区：页头导航栏、车次详情展示区、乘客信息管理区、订单操作与提示区、页脚导航栏。主体内容两侧保留20px的内边距。
      - id: REQ-6-1-2
        name: 页头导航组件
        ui_description: |
          - **品牌标识区**：位于左上角，复用标准Logo资源（"登录页-顶部导航区域-Logo区域.png"），左侧展示中国铁路12306官方徽标，右侧配以黑色的"中国铁路12306"及灰色的英文标识"12306 CHINA RAILWAY"。点击该区域可快速返回首页。
          - **用户欢迎语**：紧邻标识区右侧，展示黑色的问候语"欢迎登录12306"。
      - id: REQ-6-1-3
        name: 车次详情展示区（TrainInfoSection）
        ui_description: |
          - **容器样式**：白色背景，边框色浅蓝，圆角半径10px，顶部外边距20px，限制最大宽度1100px。
          - **区域标题**：采用渐变背景色（浅蓝色至深蓝色），顶部圆角10px，内边距5px 20px，底部边框浅蓝色。标题文字大小16px，中等加粗（500），白色。
          - **信息面板**：背景色浅蓝，内边距10px 20px。
          - **核心车次数据**：字体大小20px，深灰色。日期、车次号及站点名称加粗（800）并显示为黑色。其余辅助信息字体16px，常规粗细（400）。
          - **票务详情区块**：上边距12px，顶部以虚线分隔（1px dashed 浅灰色），内部元素间距50px。
            - **席别名称**：字体14px，深灰色，常规粗细。
            - **票价指示**：字体14px，橙色，半粗体（600），格式规范为"¥xx.0元"。
            - **余票提示**：字体14px，深灰色，常规粗细，显示格式为"余票x张"或"无票"。
            - **优惠标识**：字体14px，绿色，中等加粗（500）。
          - **免责声明**：上边距5px，字体13px，蓝色，行高20px。前置"*"符号，链接色亮蓝色，悬停加深至深蓝色。文案内容："票价仅为参考，最终以实际出票为准"。
      - id: REQ-6-1-4
        name: 乘客信息管理区（PassengerInfoSection）
        ui_description: |
          - **容器样式**：白色背景，边框色浅蓝，圆角10px，顶部外边距20px，最大宽度1100px。
          - **区域标题**：渐变背景（浅蓝色至深蓝色），顶部圆角10px，内边距5px 20px，底部边框浅蓝色。标题文字"乘客信息（填写说明）"，白色，16px，中等加粗。标题栏右侧集成常用联系人搜索功能。
          - **操作面板**：白色背景，内边距15px 20px 0 20px。
          - **常用联系人列表**：底部设置虚线分隔（1px dashed 灰色），下边距5px。
            - **分组标题**：字体14px，半粗体（600），蓝色，配以用户图标（👤，18px）。
            - **联系人选项组**：采用Flex布局，自动换行，项间距10px。
              - **选择项样式**：复选框14px，灰色边框。选中状态背景及边框变为蓝色，显示白色勾选标记。标签字体14px，深灰色，内边距5px 15px 5px 25px。
              - **无数据提示**：内边距20px，灰色文字，14px，居中显示。
          - **联系人搜索组件**（PassengerSearchBox）：置于标题栏右侧，尺寸150px×32px，内边距6px 12px，深灰边框，无圆角。右侧配置搜索按钮（32px×32px，蓝色背景，悬停渐变，白色图标）。
          - **购票人信息表格**（PurchaseInfoTable）：上下边距分别为10px和15px。
            - **表格容器**：浅灰边框，直角，白色背景。
            - **表头设计**：网格布局，列宽配置为[40px, 110px, 200px, 140px, 160px, 自适应, 40px]。背景浅灰，底边框浅灰色。字体14px，常规粗细，黑色。包含列名："序号"、"票种"、"席别"、"姓名"、"证件类型"、"证件号码"及操作列。
            - **数据行样式**（PurchaseInfoRow）：网格布局，列宽对齐表头。背景色交替（浅蓝 / 淡蓝），悬停加深（淡蓝色），底边框浅灰色。最小高度45px。
              - **序号列**：14px，黑色，居中。
              - **票种选择**：下拉组件，默认"成人票"。
              - **席别选择**：下拉组件，格式"席别名称（¥xx.0元）"，仅展示可用席别。
              - **姓名展示**：只读文本框，全宽，内边距6px 10px，浅灰边框，圆角2px，14px，深灰文字，白色背景。
              - **证件类型**：下拉组件，默认锁定"居民身份证"。
              - **证件号码**：只读文本框，展示脱敏数据（首尾4位，中间掩码），样式同姓名框。
              - **移除操作**：22px圆形按钮，橙色背景，白色图标，悬停加深并微放大。
            - **无数据提示**：内边距30px，灰色文字，13px，居中，白色背景。
          - **保险推广横幅**：全宽展示，引用图片资源"/images/order.jpg"。
      - id: REQ-6-1-5
        name: 订单操作与提示区
        ui_description: |
          - **提交操作栏**（OrderSubmitSection）：背景透明，顶部外边距20px，最大宽度1100px。
            - **协议确认提示**：下边距15px，12px，黑色。协议链接蓝色，带下划线，悬停加深。文案："提交订单表示阅读并同意《中国集团铁路旅客运输规程》《服务条款》"。
            - **功能按钮组**：Flex居中布局，间距50px。
              - **"上一步"控件**：尺寸180px×40px，白色背景，深灰文字，浅灰边框，圆角3px，16px半粗体。悬停背景变灰。点击触发返回操作。
              - **"提交订单"控件**：尺寸180px×40px，橙色背景，白色文字，圆角3px，16px半粗体。悬停变浅，禁用状态半透明。
          - **温馨提示面板**（WarmTipsSection）：浅黄背景，浅黄边框，圆角10px，内边距10px 15px，顶部外边距20px，最大宽度1100px。
            - **提示标题**：15px，粗体（700），深灰色，下边距5px。
            - **提示条目**：有序列表，左缩进15px。条目字体14px，深灰色，行高22px。链接色蓝色，悬停加深。
      - id: REQ-6-1-6
        name: 页脚导航组件
        ui_description: |
          - **页脚布局**：左侧展示友情链接，右侧并排展示四个官方媒体二维码（微信、微博、公众号、App下载），直接引用对应图片资源。

  - id: REQ-6-2
    name: 席位自动匹配逻辑
    children:
      - id: REQ-6-2-1
        name: G字头列车席位默认
        scenarios:
          - name: 用户为G字头城际列车购票
            steps:
              - action: 用户选中G字头车次进入购票流程
                expectation: 系统准备就绪
              - action: 购票页面初始化完成
                expectation: 购票信息行的“席位”下拉框自动选中“二等座（¥xx元）”。
      - id: REQ-6-2-2
        name: C字头列车席位默认
        scenarios:
          - name: 用户为C字头城际列车购票
            steps:
              - action: 用户选中C字头车次进入购票流程
                expectation: 系统准备就绪
              - action: 购票页面初始化完成
                expectation: 购票信息行的“席位”下拉框自动选中“二等座（¥xx元）”。
      - id: REQ-6-2-3
        name: D字头列车席位默认
        scenarios:
          - name: 用户选择D字头车次进行购票
            steps:
              - action: 用户选中D字头车次进入购票流程
                expectation: 系统准备就绪
              - action: 购票页面初始化完成
                expectation: 购票信息行的“席位”下拉框自动选中“二等座（¥xx元）”。

  - id: REQ-6-3
    name: 乘车人选择交互
    children:
      - id: REQ-6-3-1
        name: 勾选添加乘车人
        scenarios:
          - name: 用户从列表中勾选一名乘车人（未选过）
            steps:
              - action: 用户在**订单填写页**，当前未选择乘车人
                expectation: 系统准备就绪
              - action: 用户勾选某联系人
                expectation: 系统自动填充第一行购票信息，锁定“姓名”、“证件类型”、“证件号码”为只读状态。
          - name: 用户从列表中勾选一名乘车人（已选过至少一人）
            steps:
              - action: 用户在**订单填写页**，已存在选定乘车人
                expectation: 系统准备就绪
              - action: 用户勾选另一联系人
                expectation: 系统追加一行新的购票信息，自动填充并锁定相关个人信息字段。
      - id: REQ-6-3-2
        name: 禁止手动录入乘车人
        scenarios:
          - name: 用户尝试手动输入乘车人姓名
            steps:
              - action: 用户位于**订单填写页**
                expectation: 系统准备就绪
              - action: 用户点击“姓名”输入框尝试编辑
                expectation: 输入框为只读状态，不响应任何键盘输入。
      - id: REQ-6-3-3
        name: 取消乘车人关联
        scenarios:
          - name: 用户取消勾选已选乘车人（只剩一人）
            steps:
              - action: 当前仅选中一名乘车人
                expectation: 系统准备就绪
              - action: 用户取消该联系人的勾选状态
                expectation: 第一行购票信息被清空并恢复至初始空状态。
          - name: 用户取消勾选已选乘车人（多人）
            steps:
              - action: 当前选中多名乘车人
                expectation: 系统准备就绪
              - action: 用户取消某联系人的勾选状态
                expectation: 系统移除对应的购票信息行，并自动重排剩余行的序号。

  - id: REQ-6-4
    name: 席位调整交互
    children:
      - id: REQ-6-4-1
        name: 查看可用席位
        scenarios:
          - name: 用户展开席位下拉菜单
            steps:
              - action: 用户位于**订单填写页**
                expectation: 系统准备就绪
              - action: 用户点击“席别”下拉框
                expectation: 菜单仅列出当前有余票的席位及价格，已售罄席位不可见。
      - id: REQ-6-4-2
        name: 切换席位类型
        scenarios:
          - name: 用户更改席位选择
            steps:
              - action: 系统已预设默认席位
                expectation: 系统准备就绪
              - action: 用户选择其他席别
                expectation: 对应行的席位信息更新，票价随之调整。

  - id: REQ-6-5
    name: 订单提交处理
    children:
      - id: REQ-6-5-1
        name: 空乘客校验
        scenarios:
          - name: 用户未选择任何乘车人点击"提交订单"
            steps:
              - action: 用户在**订单填写页**，未勾选任何联系人
                expectation: 系统准备就绪
              - action: 用户点击"提交订单"
                expectation: 弹出警告弹窗"请选择乘车人！"，需点击"确认"关闭。
      - id: REQ-6-5-2
        name: 库存校验（并发控制）
        scenarios:
          - name: 用户提交订单时车票售罄
            steps:
              - action: 用户已选择乘车人
                expectation: 系统准备就绪
              - action: 网络连接正常
                expectation: 系统准备就绪
              - action: 用户点击"提交订单"
                expectation: 系统准备就绪
              - action: 后端检测到席位不足
                expectation: 弹出提示弹窗"手慢了，该车次席别车票已售罄！"，点击"确认"返回**车票查询界面**。
      - id: REQ-6-5-3
        name: 正常提交流程
        scenarios:
          - name: 用户选择乘车人后成功提交订单
            steps:
              - action: 用户已选择乘车人
                expectation: 系统准备就绪
              - action: 网络连接正常
                expectation: 系统准备就绪
              - action: 用户点击"提交订单"
                expectation: 系统准备就绪
              - action: 校验通过且库存充足
                expectation: 100ms内弹出**信息核对弹窗**。
      - id: REQ-6-5-4
        name: 网络异常处理
        scenarios:
          - name: 用户提交订单时网络异常
            steps:
              - action: 用户已选择乘车人
                expectation: 系统准备就绪
              - action: 网络连接中断或超时
                expectation: 系统准备就绪
              - action: 用户点击"提交订单"
                expectation: 弹出提示弹窗"网络忙，请稍后再试。"，点击"确认"后停留在当前页或返回**购票页面**。

  - id: REQ-6-6
    name: 订单信息确认（OrderConfirmationModal）
    children:
      - id: REQ-6-6-1
        name: 确认弹窗视觉设计
        ui_description: |
          - **整体架构**：全屏模态框，半透明黑色遮罩。弹窗主体宽90%（最大800px，最大高85vh），白色背景，直角，悬浮阴影。布局分为：页头（蓝色背景标题）、车次概览区、乘客详情区、底部操作区。
          - **标题栏**：渐变背景，显示标题"请核对以下信息"及关闭按钮。
          - **车次概览区**：展示出发日期、车次号、发到时间及站点信息。
          - **乘客详情区**：表格形式列出序号、席别、票种、姓名、证件类型及号码。底部附带积分提示及"系统将随机为您申请席位，暂不支持自选席位"说明。
          - **底部操作区**：高亮展示余票情况，配置"返回修改"（次要操作）和"确认"（主要操作）按钮。
      - id: REQ-6-6-2
        name: 确认交互流程
        scenarios:
          - name: 用户点击“返回修改”按钮
            steps:
              - action: 用户进入**信息核对弹窗**
                expectation: 系统准备就绪
              - action: 用户点击“返回修改”
                expectation: 弹窗关闭，返回**订单填写页**继续编辑。
          - name: 用户点击“确认”按钮
            steps:
              - action: 用户进入**信息核对弹窗**
                expectation: 系统准备就绪
              - action: 用户点击“确认”
                expectation: 系统提示"订单已经提交，系统正在处理中，请稍等"；随即提示"购买成功"，展示座位号等票务信息；同步更新**数据库**座位状态为**已被预定**。
