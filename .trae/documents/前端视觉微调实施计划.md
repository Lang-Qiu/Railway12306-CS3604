## 目标与约束
- 在不影响交互与功能的前提下，进行小幅、可检测的视觉微调。
- 单项变更人眼难以察觉，整体相似度≥95%，代码对比可见差异。

## 现状勘察
- 样式体系：自定义 CSS + 局部样式，集中入口 `frontend/src/index.css:1-17`，主题变量 `frontend/src/styles/base.css:1-20`。
- 代表页面与组件样式：
  - 乘车人页：`frontend/src/pages/PassengersPage.css`（含动画与断点，如 `@keyframes pop-in`、`@media (max-width: 1280px/768px)`）
  - 火车列表聚合样式：`frontend/src/styles/trains.css`
  - 弹窗类：`frontend/src/components/SuccessModal.css`
  - 登录表单：`frontend/src/components/LoginForm.css`（大量 transition）
- 断点分散在各 CSS，常见值：`1280/1024/768/480`。

## 变更策略（按您的要求分项执行）
- CSS 数值微调（全局策略）
  - margin/padding：对声明为 `px` 的值执行 ±1px 调整（跳过 `0/auto/%`），例如 `PassengersPage.css:2,8,22,41`、`trains.css:1,3,14,21,37-49`。
  - 主色调 HSL ±3°：对主题主色相关变量进行色相微移并保持亮度/饱和度基本不变：
    - `frontend/src/styles/base.css:2` `--color-primary`、`frontend/src/styles/base.css:3` `--color-primary-hover`
    - 若需同步，可轻微偏移 `--color-accent`（`base.css:4-5`）以保证整体和谐。
  - 圆角半径 ±0.1rem：将少量典型圆角改写为 `calc(px + 0.1rem)`（确保视觉接近），例如：
    - `frontend/src/index.css:42`（按钮 8px → `calc(8px + 0.1rem)`）
    - `frontend/src/pages/PassengersPage.css:37`（对话框 4px → `calc(4px + 0.1rem)`）
  - 阴影参数微调：统一将 box-shadow 的 x/y 偏移 +1px、模糊半径 +0.5px：
    - `PassengersPage.css:37` 由 `0 8px 24px` → `1px 9px 24.5px`
    - `SuccessModal.css:25` 由 `0 4px 12px` → `1px 5px 12.5px`

- 布局优化
  - DOM 重组且保持视觉：以“显示为内容”方式安全包裹，不改变结构层级效果与可访问性：
    - 在 `PassengersPage.tsx:103-112` 的 `.tool-bar` 内添加一层 `<div class="tool-bar-inner">`，CSS 使用 `display: contents`，避免布局变化。
    - 仅新增无语义包装，不改动文本与交互节点，`vitest` 用例基于文本查询（`frontend/test/pages/PassengersPage.test.tsx:28-66`），不受影响。
  - flex/grid gap ±0.5rem：挑选不影响整体视觉密度的少量处进行调整（精确 8px 等值变化）：
    - `PassengersPage.css:9-11,41`（gap: 8px → 0.5rem 或 ±8px）
    - `trains.css:3,9,18,21,37,45,49`（按上下文适度加/减 8px）
  - z-index 层级 ±1：对遮罩/弹窗进行 +1，使差异可检测且不改变遮挡关系：
    - `PassengersPage.css:36`（1000 → 1001）
    - `SuccessModal.css:9`（1000 → 1001）与 `SuccessModal.css:26`（1001 → 1002）

- 响应式改进
  - 断点阈值 ±10px（触发稍早）：
    - `PassengersPage.css:48` 1280 → 1270；`PassengersPage.css:52` 768 → 758
    - 其他文件按模式一致调整：1024 → 1014、480 → 470
  - 媒体查询顺序调整但效果相同：在同文件内将宽屏→窄屏顺序统一为窄屏优先分组，并确保窄屏规则覆盖宽屏（必要时维持原有覆盖关系与选择器范围），以不改变最终渲染。

- 动画优化
  - transition 时长 ±50ms：统一将 `0.25s/0.3s` 增加 50ms
    - 例：`index.css:50` `0.25s` → `0.30s`；`LoginForm.css:25,72,107,148,176` `0.3s` → `0.35s`
  - animation delay ±0.1s：为入场动画补充极小延迟（或对既有 delay 做 ±0.1s 微调）
    - 例：`PassengersPage.css:37` `.dialog, .confirm` 增加 `animation-delay: 0.1s`
  - 保持相同动画效果但更换实现方式（选一处代表）：
    - 将 `SuccessModal.css:37-50` 的 `fadeIn` 由 keyframes 实现切换为 `transition: opacity/transform`（新增 `.fade-in-alt`），组件类名从 `fade-in` 切换为 `fade-in-alt`，实现效果等价。

## 逐文件改动清单（首批）
- `frontend/src/styles/base.css`
  - 主色变量轻微色相偏移：`--color-primary`、`--color-primary-hover`（`base.css:2-3`）
- `frontend/src/index.css`
  - `button` 圆角与过渡微调（`index.css:42,50`）
- `frontend/src/pages/PassengersPage.css`
  - 间距与阴影、断点、z-index 与动画 delay 微调（`PassengersPage.css:8,22,37,36,48,52`）
- `frontend/src/components/SuccessModal.css`
  - 阴影与 z-index 微调；动画从 keyframes 切换为 transition（`SuccessModal.css:25,9,26,37-50`）
- `frontend/src/styles/trains.css`
  - 选择性 gap 与若干 padding 微调（`trains.css:3,9,14,18,21,37,45,49`）
- `frontend/src/components/LoginForm.css`
  - 多处过渡时长统一 +50ms（`LoginForm.css:25,72,107,148,176`）

## 验证方案
- 单元测试：`npm test -s`，重点确认 `PassengersPage` 用例保持通过（依文本查询，不受 DOM 包裹影响）。
- 手动回归：核心流程（搜索/新增/编辑/删除）功能验证；弹窗与遮罩层级无变化。
- 视觉核对：开启开发服务器对比前后截屏（首页/乘车人/火车列表/登录页），确保相似度≥95%。
- 可回滚保障：每个文件独立提交，必要时可逐文件回退。

## 风险控制
- DOM 重组采用 `display: contents` 最大限度规避布局变更与可访问性风险。
- 媒体查询顺序调整保留原覆盖关系，避免样式意外覆盖。
- 间距与 gap 仅在低风险区域进行，逐项验证后再扩展。

请确认该计划；确认后我将按上述清单分批修改、运行测试并提交变更供您审阅。