id: REQ-5
name: 车次列表页
functional_description: 车票信息查询结果的呈现以及相关筛选操作的界面布局与交互逻辑。
children:
  - id: REQ-5-1
    name: 车票查询页面布局
    children:
      - id: REQ-5-1-1
        name: 整体页面布局
        ui_description: |
          页面背景设定为白色（white），垂直方向划分为五个主要功能区，自上而下依次是**页面顶部导航区域**，**车次搜索和查询区域**，**车次筛选控制面板**，**车次数据展示列表**以及**页脚导航链接区**。内容区域的最大宽度限制为1200px，内边距设置为20px。
      - id: REQ-5-1-2
        name: 顶部导航区域
        ui_description: |
          - **Logo 区域**：页面左上区域用于放置Logo（引用图片"登录页-顶部导航区域-Logo区域.png"），左侧展示中国铁路12306官方标志，标志右侧上方显示黑色字体的"中国铁路12306"、下方显示灰色字体的"12306 CHINA RAILWAY"，点击Logo区域可导航回12306首页。
          - **欢迎信息**：紧邻Logo区域右侧的是欢迎语展示区，显示黑色文本"欢迎登录12306"。
      - id: REQ-5-1-3
        name: 车次搜索和查询区域（TrainSearchBar）
        ui_description: |
          - **整体样式**：背景色采用#eff1f9（浅蓝色），边框颜色为#bbd7ee（浅蓝色），圆角半径4px，内边距16px，下边距16px，配置阴影效果0 1px 3px rgba(0, 0, 0, 0.05)。
          - **行程类型切换控件（单程/往返）**：单选框尺寸为16px×16px，选中状态颜色为#2196f3（蓝色），标签文字大小14px，颜色#000000（黑色）。
          - **查询关键词录入域**：采用横向布局，标签文字大小13px，颜色#000000（黑色）。输入框宽度120px，高度30px，内边距6px 10px，边框色#d0d5e8（浅灰色），圆角3px，文字大小13px，文字颜色#333333（深灰色），占位符颜色#bbb（浅灰色）。聚焦（focus）状态下边框变为#5ba3e0（蓝色），并附带阴影效果rgba(91, 163, 224, 0.1)。
          - **起始地互换控件**：尺寸30px×30px，背景色#eff1f9（浅蓝色），图标颜色#5ba3e0（蓝色），圆角3px，图标尺寸20px×20px。悬停（hover）状态下背景变为#f0f7ff（浅蓝色），并带有阴影效果。
          - **执行查询操作按钮**：内边距6px 30px，高度30px，背景色#ff8001（橙色），文字颜色白色（white），圆角3px，字体大小14px，字体加粗（font-weight: 500）。悬停（hover）状态下背景变为#f7920a（浅橙色），禁用状态下背景为#cccccc（灰色）。
          - **异常反馈提示**：文字颜色#d32f2f（红色），字体大小13px，内边距8px 20px，背景色#ffebee（浅红色），圆角4px，上边距10px。
      - id: REQ-5-1-4
        name: 车次筛选控制面板（TrainFilterPanel）
        ui_description: |
          - **整体样式**：背景色白色（white），边框颜色#e0e0e0（浅灰色），圆角4px，下边距20px，阴影效果0 2px 4px rgba(0, 0, 0, 0.06)。
          - **日期切换选项卡栏**：背景采用渐变色（#f9f9f9至#e7e7e7），边框颜色#d0d0d0（浅灰色），底部边框#569ecf（蓝色），内边距8px 16px，字体大小13px，颜色#333333（深灰色），字体加粗（font-weight: 500）。选中状态下背景变为白色（white），文字颜色#499bd5（蓝色），字体加粗（font-weight: 1000），边框变为#569ecf（蓝色）。
          - **具体筛选条件设置面板**：内边距16px 20px，边框颜色#569ecf（蓝色），背景色白色（white）。
          - **筛选分类标签**：字体大小14px，字体加粗（font-weight: 800），颜色#000000（黑色）。
          - **"全部"重置按钮**：内边距0px 8px，高度25px，背景色#8ea7d4（蓝色），文字白色（white），圆角3px，字体大小12px，边框颜色#8ea7d4（蓝色）。悬停（hover）状态下背景变为#7a95c5（深蓝色）。
          - **多选框筛选组件**：复选框尺寸14px×14px，边框颜色#8fc0e5（浅蓝色）。选中状态下背景#8fc0e5（浅蓝色），勾选标记为白色粗体"✓"（字体大小12px）。标签字体大小13px，颜色#000000（黑色），最小宽度110px。
          - **发车时段下拉菜单**：下拉框高度28px，内边距4px 10px，边框颜色#d0d0d0（浅灰色），圆角3px，字体大小13px，颜色#000000（黑色）。悬停（hover）和聚焦（focus）状态下边框变为#2196f3（蓝色），并附带阴影效果rgba(33, 150, 243, 0.1)。
          - **重置筛选条件按钮**：内边距6px 24px，背景色#ff7f02（橙色），文字白色（white），字体大小13px，字体加粗（font-weight: 500）。悬停（hover）状态下背景呈现渐变色（#ffaa44至#ff8822）。
          - 用户可依据车次类型（如"GC-高铁/城际"，"D-动车"）、出发车站、到达车站、车次席别（如"商务座"、"一等座"、"二等座"、"软卧"、"硬卧"）来过滤显示符合要求的车次。
          - **查询结果呈现**：
            - 若检索到匹配的车次，车次列表将展示在**车次数据展示列表**区域。
            - 若未检索到匹配的车次，**车次数据展示列表**区域显示空白，并提示"暂无符合条件的车次"，内边距60px 20px，文字颜色#999999（灰色），图标大小48px，提示文字大小16px，颜色#666666（深灰色）。
      - id: REQ-5-1-5
        name: 车次数据展示列表（TrainList）
        ui_description: |
          - **整体样式**：背景色白色（white），边框颜色#e0e0e0（浅灰色），圆角4px，阴影效果0 2px 4px rgba（0, 0, 0, 0.06）。
          - **查询结果概览信息**：内边距12px 16px，背景色白色（white），底部边框#e0e0e0（浅灰色），字体大小13px，颜色#333333（深灰色）。路线信息加粗（font-weight: 600），日期和数量颜色#000000（黑色）且数量加粗（font-weight: 600），换乘提示颜色#333333（深灰色），换乘高亮颜色#ff7700（橙色）且加粗（font-weight: 500）。
          - **数据列表标题栏**：采用网格布局，列宽依次为80px、100px、80px、70px、11列自适应（最小50px）、80px。背景采用渐变色（#3699d6至#187ac1），底部边框#3466a0（深蓝色），字体大小13px，加粗（font-weight: 600），文字颜色白色（white），内边距4px 3px，最小高度32px。单元格右边框#2270a4（深蓝色）。可排序列悬停（hover）时背景为半透明白色rgba(255, 255, 255, 0.1)，排序图标颜色#ffd700（金色）。
          - **单条车次数据行**：网格布局，列宽与标题栏保持一致。偶数行背景#eff1f9（浅蓝色），奇数行背景白色（white），底部边框#e9ecef（浅灰色）。悬停（hover）时显示阴影0 1px 4px rgba(0, 0, 0, 0.08）。
          - **车次信息单元格**：字体大小13px，颜色#495057（深灰色）。内边距依据列位置不同而定（前3列及历时列为8px，其余列为4px）。从历时列右侧开始，添加浅蓝色竖线分隔（颜色#c8ddf0）。
          - **车次号显示**：字体大小16px，加粗（font-weight: 800），颜色#333333（深灰色），带有下划线（颜色#333333）。
          - **起止站点详情**：出发站标签背景#cf9840（棕色），到达站标签背景#3f6901（绿色），标签尺寸18px×18px，圆角2px，文字颜色白色（white），字体大小11px，加粗（font-weight: 600）。站点名称字体大小14px，加粗（font-weight: 600），颜色#333333（深灰色）。
          - **发到时间详情**：出发时间字体大小16px，加粗（font-weight: 800），颜色#333333（深灰色）；到达时间字体大小16px，加粗（font-weight: 800），颜色#999999（灰色）；到达日期标签字体大小13px，颜色#5c5c5c（深灰色），加粗（font-weight: 500）。
          - **运行总时长**：字体大小15px，颜色#343434（深灰色），加粗（font-weight: 800）。
          - **席位余票状态**：字体大小13px，加粗（font-weight: 500），内边距2px 0。
            - **有票**（余票≥20张）：显示"有"，颜色#52c41a（绿色），加粗（font-weight: 600）。
            - **余票紧张**（余票<20张）：显示具体数字，颜色#000000（黑色），加粗（font-weight: 800）。
            - **无票**（余票=0张）：显示"无"，颜色#999999（灰色）。
            - **无此席别**：显示"--"，颜色#999999（灰色）。
          - **预订操作控件**：位于每行最右侧，宽度80px，背景色#ff8001（橙色），文字白色（white），字体大小14px。悬停（hover）时背景变为#ff8533（浅橙色），禁用时背景#cccccc（灰色）。若所有席别均无票，按钮显示为灰色且不可点击。
          - **查询结果内容范畴**：表格展示项包括车次、出发站/到达站、出发时间、到达时间、运行总时长、商务座/特等座、优选/一等座、一等座、二等座/二等包座、高级/软卧、软卧/动卧/一等卧、硬卧/二等卧、软座、硬座、无座、备注等信息。
          - **车次列表过滤规则**：不包含换乘方案，仅展示满足查询及筛选条件的直达车次。
      - id: REQ-5-1-6
        name: 页脚导航链接区
        ui_description: |
          - **页脚导航**：左侧展示友情链接，右侧展示四个官方平台的二维码，依次为"中国铁路官方微信"（引用图片二维码"中国铁路官方微信二维码.png"）、"中国铁路官方微博"（引用图片二维码"中国铁路官方微博二维码.png"）、"12306 公众号"（引用图片二维码"12306公众号二维码.png"）、"铁路 12306"（引用图片二维码"铁路12306二维码.png"）。

  - id: REQ-5-2
    name: 车票查询页面的访问入口
    children:
      - id: REQ-5-2-1
        name: 从首页快捷菜单进入
        scenarios:
          - name: 首页通过点击“车票”快捷页面入口进入车票查询页面
            steps:
              - action: 用户在**首页**点击“车票”快捷入口
                expectation: 系统准备就绪
              - action: **车票查询页面**加载完毕
                expectation: **车票查询页面**的**车次数据展示列表**为空；**车次搜索和查询区域**的搜索框处于默认状态；**车次筛选控制面板**的所有选项均为未勾选的默认状态。
      - id: REQ-5-2-2
        name: 从首页查询结果跳转
        scenarios:
          - name: 用户在首页/查询页输入信息后跳转
            steps:
              - action: 用户在**首页/查询页**录入出发站、到达站及出发日期
                expectation: 系统准备就绪
              - action: 用户点击“查询”按钮
                expectation: 跳转至**车票查询页面**，**车次数据展示列表**显示匹配的车次信息，且用户输入的出发站、到达站、出发日期自动填充至对应的搜索框中。
          - name: 用户在首页/查询页勾选了“GC-高铁/城际”选项
            steps:
              - action: 用户在**首页/查询页**录入行程信息后点击“查询”，跳转至**车票查询页面**
                expectation: 系统准备就绪
              - action: 用户在**首页/查询页**已勾选“GC-高铁/城际”选项
                expectation: 系统准备就绪
              - action: 车票查询页面加载完毕
                expectation: **车票查询页面**自动勾选**车次筛选控制面板**中的“GC-高铁/城际”和“D-动车”选项；**车次数据展示列表**仅展示符合条件的高铁及动车车次。

  - id: REQ-5-3
    name: 执行车次查询操作
    children:
      - id: REQ-5-3-1
        name: 查询条件的默认填充机制
        scenarios:
          - name: 用户在车次搜索和查询区域未输入出发地
            steps:
              - action: 用户位于**车票查询页面**
                expectation: 系统准备就绪
              - action: 用户未在**车次搜索和查询区域**录入**出发地**
                expectation: 系统在“出发地”输入框显示默认提示文本“请选择城市”。
          - name: 用户未输入到达地
            steps:
              - action: 用户位于**车票查询页面**
                expectation: 系统准备就绪
              - action: 用户未在**车次搜索和查询区域**录入**到达地**
                expectation: 系统在“到达地”输入框显示默认提示文本“请选择城市”。
          - name: 用户未输入出发日期
            steps:
              - action: 用户位于**车票查询页面**
                expectation: 系统准备就绪
              - action: 用户未在**车次搜索和查询区域**录入**出发日期**
                expectation: 系统在“出发日期”输入框默认填入当前日期。
      - id: REQ-5-3-2
        name: 必要查询条件的完整性校验
        scenarios:
          - name: 用户输入到达地未输入出发地，点击"查询"按钮
            steps:
              - action: 用户在**车票查询页面**，**车次搜索和查询区域**中**未录入出发地**
                expectation: 系统准备就绪
              - action: 用户点击"查询"按钮
                expectation: "出发地"输入框下方显示红色错误提示"请选择出发城市"（颜色#d32f2f，字体12px，绝对定位，上边距2px）；"出发地"输入框边框变红（#d32f2f）。
          - name: 用户输入出发地未输入到达地，点击"查询"按钮
            steps:
              - action: 用户在**车票查询页面**，已录入出发地但**未录入到达地**
                expectation: 系统准备就绪
              - action: 用户点击"查询"按钮
                expectation: "到达地"输入框下方显示红色错误提示"请选择到达城市"（颜色#d32f2f，字体12px，绝对定位，上边距2px）；"到达地"输入框边框变红（#d32f2f）。
      - id: REQ-5-3-3
        name: 出发地有效性验证
        scenarios:
          - name: 用户在输入的出发地不在数据库的城市列表中
            steps:
              - action: 用户在**车次搜索和查询区域**的**出发地输入框**中录入了一个不存在于**数据库**中的城市
                expectation: 系统准备就绪
              - action: 用户点击**查询**
                expectation: 查询按钮上方弹出系统提示"无法匹配该出发城市"（颜色#d32f2f，字体13px，内边距8px 20px，背景#ffebee，圆角4px，上边距10px）；系统在**出发地输入框**下拉列表中推荐**数据库**中相似的城市；用户可选择推荐城市进行填充。
      - id: REQ-5-3-4
        name: 到达地有效性验证
        scenarios:
          - name: 用户在输入的到达地不在数据库的城市列表中
            steps:
              - action: 用户在**车次搜索和查询区域**的**到达地输入框**中录入了一个不存在于**数据库**中的城市
                expectation: 系统准备就绪
              - action: 用户点击**查询**
                expectation: 查询按钮上方弹出系统提示"无法匹配该到达城市"（颜色#d32f2f，字体13px，内边距8px 20px，背景#ffebee，圆角4px，上边距10px）；系统在**到达地输入框**下拉列表中推荐**数据库**中相似的城市；用户可选择推荐城市进行填充。
      - id: REQ-5-3-5
        name: 有效出发站点智能推荐
        scenarios:
          - name: 用户未选择或已选择出发地
            steps:
              - action: 用户位于**车票查询页面**
                expectation: 系统准备就绪
              - action: 用户点击**出发地输入框**
                expectation: 系统在**出发地输入框**下拉列表中展示**数据库**存储的所有站点；用户可选择并填充。
      - id: REQ-5-3-6
        name: 有效到达站点智能推荐
        scenarios:
          - name: 用户未选择或已选择到达地
            steps:
              - action: 用户位于**车票查询页面**
                expectation: 系统准备就绪
              - action: 用户点击**到达地输入框**
                expectation: 系统在**到达地输入框**下拉列表中展示**数据库**存储的所有站点；用户可选择并填充。
      - id: REQ-5-3-7
        name: 有效出发日期选择控制
        scenarios:
          - name: 用户未选择或已选择出发日期
            steps:
              - action: 用户位于**车票查询页面**
                expectation: 系统准备就绪
              - action: 用户点击**出发日期选择框**
                expectation: 系统在下拉日历中显示日期。已放票日期为黑色，已过期或未开票日期为灰色且不可选。用户点击**已放票**日期可填充；点击**灰色**日期无响应。
      - id: REQ-5-3-8
        name: 查询请求成功且系统正常响应
        scenarios:
          - name: 用户输入了正确的出发地、到达地、出发日期且系统响应
            steps:
              - action: 用户在**车次搜索和查询区域**录入了有效的出发地、到达地及出发日期
                expectation: 系统准备就绪
              - action: 用户点击**查询**按钮
                expectation: 系统在100毫秒内更新**车次数据展示列表**，显示符合条件且车次类型为“GC-高铁/城际”或“D-动车”的所有车次。
      - id: REQ-5-3-9
        name: 查询请求超时或无响应处理
        scenarios:
          - name: 用户输入了正确的出发地、到达地、出发日期但系统未响应
            steps:
              - action: 用户在**车次搜索和查询区域**录入了有效的出发地、到达地及出发日期
                expectation: 系统准备就绪
              - action: 用户点击**查询**按钮
                expectation: 系统未在100毫秒内更新列表；查询按钮上方显示系统提示"查询失败，请稍后重试"（颜色#d32f2f，字体13px，内边距8px 20px，背景#ffebee，圆角4px，上边距10px）。

  - id: REQ-5-4
    name: 车票数据存储与管理
    children:
      - id: REQ-5-4-1
        name: 数据存储结构
        functional_description: |
          - 涵盖“车次”、“出发站”、所有“途经车站”、“到达站”以及相邻站点间的“运行总时长”。
          - 包含车厢编号、对应席位类型、座位序号，以及每个座位在相邻站点间是处于**空闲**还是**已被预定**状态。
          - 所有需纳入**车票数据库**的车次信息均存储于“车次信息.json”文档中。
      - id: REQ-5-4-2
        name: 剩余票额计算逻辑
        functional_description: |
          - 针对某车次相邻两站：直接检索**数据库**中该区间对应席位的**空闲**数量并返回。
          - 针对某车次不相邻两站：若某座位从出发站至到达站全程均为**空闲**状态，则余票数加一；遍历整列车对应席位车厢，汇总得到余票总数。
          - 针对某车次不相邻两站：若某席位的所有座位在中途任意两站间处于**已被预定**状态，则该席位余票数为0。
          - **注意**：余票统计以座位为最小单位，仅当一个座位全程**空闲**时，才计入余票。
      - id: REQ-5-4-3
        name: 票价核算逻辑
        functional_description: |
          - 某两站间特定席位的票价等于途经各区间该席位票价的总和。
      - id: REQ-5-4-4
        name: 数据更新与维护机制
        functional_description: |
          - 若用户**预定**成功，需更新对应车次、车厢、座位号在相关区间为**已被预定**状态。
          - 数据库支持新车次的录入及旧车次的移除。
          - 数据库支持的起止地点必须是数据库中现有车次途径或覆盖的车站/地区。

  - id: REQ-5-5
    name: 车次结果筛选交互
    children:
      - id: REQ-5-5-1
        name: 基于复选框的多条件筛选
        scenarios:
          - name: 用户在车次信息筛选区域选择某个车次类型
            steps:
              - action: 用户在**车票查询页面**，**车次数据展示列表**已加载
                expectation: 系统准备就绪
              - action: 用户在**车次类型**筛选栏勾选某类型复选框
                expectation: **车次数据展示列表**自动更新，仅展示匹配该类型的车次（不校验余票）。
          - name: 用户筛选某个出发站
            steps:
              - action: 用户在**车票查询页面**，列表已加载
                expectation: 系统准备就绪
              - action: 用户在**出发车站**筛选栏勾选某出发站
                expectation: **车次数据展示列表**自动更新，仅展示从该站出发的车次。
          - name: 用户筛选某个到达站
            steps:
              - action: 用户在**车票查询页面**，列表已加载
                expectation: 系统准备就绪
              - action: 用户在**到达车站**筛选栏勾选某到达站
                expectation: **车次数据展示列表**自动更新，仅展示到达该站的车次。
          - name: 用户筛选某个席别座位
            steps:
              - action: 用户在**车票查询页面**，列表已加载
                expectation: 系统准备就绪
              - action: 用户在筛选栏勾选某席别复选框
                expectation: **车次数据展示列表**自动更新，仅展示包含该席别的车次（不校验余票）。
          - name: 用户在同一筛选栏目勾选多个选项
            steps:
              - action: 用户在**车票查询页面**，列表已加载
                expectation: 系统准备就绪
              - action: 用户在某筛选栏（如“车次类型”）勾选多个复选框
                expectation: **车次数据展示列表**自动更新，展示匹配任一勾选条件的车次。
          - name: 用户在不同筛选栏目勾选多个选项
            steps:
              - action: 用户在**车票查询页面**，列表已加载
                expectation: 系统准备就绪
              - action: 用户在“车次类型”、“出发车站”、“到达车站”、“车次席别”等多个栏目中勾选复选框
                expectation: **车次数据展示列表**自动更新，展示同时满足所有勾选条件的车次。
          - name: 用户取消筛选条件
            steps:
              - action: 用户已勾选“GC-高铁/城际”，列表已筛选
                expectation: 系统准备就绪
              - action: 用户取消勾选“GC-高铁/城际”
                expectation: 列表自动更新，移除该筛选限制，显示符合剩余条件的车次。
          - name: 默认筛选栏初始化
            steps:
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: 车次列表尚未显示
                expectation: “车次类型”默认选中“GC-高铁/城际”和“D-动车”；其他筛选栏为空。
          - name: 自动补全筛选选项栏
            steps:
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: **车次数据展示列表**已显示内容
                expectation: 系统依据列表内容自动填充“出发车站”、“到达车站”及“车次席别”的可选项。
      - id: REQ-5-5-2
        name: 基于余票状态的动态展示逻辑
        scenarios:
          - name: 系统显示具体余票数量（少于20张）
            steps:
              - action: 某车次已显示在**车次数据展示列表**
                expectation: 系统准备就绪
              - action: 系统加载余票信息
                expectation: 系统准备就绪
              - action: 某席位余票不足20张
                expectation: 单元格直接显示具体数字，字体13px，加粗（font-weight: 800），颜色#000000（黑色），内边距2px 0。
          - name: 系统显示"有票"（余票充足）
            steps:
              - action: 某车次已显示在列表
                expectation: 系统准备就绪
              - action: 系统加载余票信息
                expectation: 系统准备就绪
              - action: 某席位余票≥20张
                expectation: 单元格显示"有"，字体13px，加粗（font-weight: 600），颜色#52c41a（绿色），内边距2px 0。
          - name: 系统显示"无票"（已售罄）
            steps:
              - action: 某车次已显示在列表
                expectation: 系统准备就绪
              - action: 系统加载余票信息
                expectation: 系统准备就绪
              - action: 某席位余票为0
                expectation: 单元格显示"无"，字体13px，加粗（font-weight: 500），颜色#999999（灰色），内边距2px 0。
          - name: 系统显示"--"（该车次无该席别票）
            steps:
              - action: 列表已显示车次
                expectation: 系统准备就绪
              - action: 系统加载席位信息
                expectation: 系统准备就绪
              - action: 某车次无对应席别
                expectation: 单元格显示"--"，字体13px，加粗（font-weight: 500），颜色#999999（灰色），内边距2px 0。
          - name: 系统更新余票状态
            steps:
              - action: 列表已显示车次且已加载余票
                expectation: 系统准备就绪
              - action: 用户刷新界面
                expectation: 系统依据最新数据更新**车次数据展示列表**的显示内容。
          - name: 用户超过五分钟未刷新界面
            steps:
              - action: 列表已显示车次且已加载余票
                expectation: 系统准备就绪
              - action: 用户未操作超过五分钟
                expectation: 系统弹出提示：页面内容已过期，请重新查询！

  - id: REQ-5-6
    name: 预订按钮点击交互
    children:
      - id: REQ-5-6-1
        name: 网络异常时的预订尝试
        scenarios:
          - name: 用户网络异常下点击”预订“
            steps:
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: **车次数据展示列表**已显示
                expectation: 系统准备就绪
              - action: 网络连接异常
                expectation: 系统准备就绪
              - action: 用户点击“预定”按钮
                expectation: 系统弹窗提示：网络忙，请稍后重试；含“确认”按钮，点击关闭弹窗。
      - id: REQ-5-6-2
        name: 未登录状态下的预订拦截
        scenarios:
          - name: 用户未登录时点击“预订”按钮
            steps:
              - action: 用户未登录
                expectation: 系统准备就绪
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: 网络连接正常
                expectation: 系统准备就绪
              - action: 用户点击“预订”按钮
                expectation: 弹窗提示：“请先登录！”；含“确认”按钮跳转登录页，“取消”按钮关闭弹窗。
      - id: REQ-5-6-3
        name: 已登录状态下的预订处理
        scenarios:
          - name: 某车次车票已售罄
            steps:
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: 列表已显示
                expectation: 系统准备就绪
              - action: 某车次所有席别均为“无”
                expectation: “预定”按钮置灰，不可点击。
          - name: 用户点击“预订”时车票恰好售罄（发生并发冲突）
            steps:
              - action: 用户已登录
                expectation: 系统准备就绪
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: “预订”按钮可点击
                expectation: 系统准备就绪
              - action: 网络正常
                expectation: 系统准备就绪
              - action: 用户点击“预订”，但在服务端校验时发现已售罄
                expectation: 弹窗提示“手慢了，该车次车票已售罄！”；含“确认”按钮，点击后关闭弹窗并刷新当前列表。
          - name: 用户点击“预订”时距离发车时间不足3小时
            steps:
              - action: 用户已登录
                expectation: 系统准备就绪
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: 距离发车不足3小时
                expectation: 系统准备就绪
              - action: 网络正常
                expectation: 系统准备就绪
              - action: 用户点击“预订”按钮
                expectation: 弹窗提示“您选择的列车距开车时间很近了，进站约需20分钟，请确保有足够的时间办理安全检查、实名制验证及检票等手续，以免耽误您的旅行。”；含“确认”和“取消”按钮，点击“确认”进入购票页，点击“取消”留在此页。
          - name: 用户点击有余票车次的“预订”按钮
            steps:
              - action: 用户已登录
                expectation: 系统准备就绪
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: 车次有余票
                expectation: 系统准备就绪
              - action: 网络正常
                expectation: 系统准备就绪
              - action: 用户点击“预订”按钮
                expectation: 页面在100ms内跳转至**购票页面**。
          - name: 用户点击“预定”按钮时，距离车次列表上次刷新时间超过5分钟
            steps:
              - action: 用户已登录
                expectation: 系统准备就绪
              - action: 用户在**车票查询页面**
                expectation: 系统准备就绪
              - action: 距离列表刷新已超5分钟
                expectation: 系统准备就绪
              - action: 用户点击“预订”按钮
                expectation: 弹窗提示“页面内容已过期，请重新查询！”；含“确认”按钮刷新列表，“取消”按钮关闭弹窗（保持原列表及刷新时间）。
