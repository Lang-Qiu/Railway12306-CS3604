- id: REQ-11
  name: 订单支付确认页
  description: 支付流程的核心交互界面
  functional_description: 集成订单信息二次确认、席位锁定状态监控、支付动作触发、订单取消及异常状态提示等功能。
  ui_description: |
    页面整体架构划分为四大模块：顶部导航栏、席位锁定倒计时栏、订单详情与支付操作区、辅助信息面板（提示/广告）。
    页面背景为纯白，主体内容区域限制最大宽度为1200px。
  children:
  - id: REQ-11.1
    name: 支付页结构布局
    description: 定义页面各功能区块的视觉规范
    ui_description: |
      1. 顶部导航栏：
         - 品牌区：左上角展示Logo及"中国铁路12306"标识。
         - 状态区：Logo右侧展示"欢迎登录12306"问候语。
         - 主菜单：蓝色背景条，包含"车票查询"、"订单查询"等入口，右侧配置用户状态组件。
      2. 席位锁定倒计时栏：
         - 容器样式：白色背景搭配蓝色边框，采用Flex布局。
         - 核心内容：配置锁形图标，展示"席位已锁定..."提示文案，橙色高亮倒计时（格式：xx分xx秒）。
         - 状态变化：剩余时间不足5分钟时文字变红并启用脉冲动画；超时后背景转浅红，时间定格为00分00秒（红色）。
      3. 订单详情与支付操作区：
         - 容器限制：最大宽度1100px。
         - 区域标题：蓝色渐变背景，白色文字"订单信息"。
         - 行程概览：展示出发日期（含星期）、车次编号、起止车站（蓝色加粗）、发到时间。
         - 乘车人明细表：
           - 表头：渐变背景，列项包含序号、姓名、证件类型/号码、票种、席别、车厢、席位号、票价。
           - 数据行：灰色文字，证件号脱敏处理，明确显示车厢（如06车）及席位（如07D号）。
         - 配套服务：展示保险相关图片素材。
         - 费用总计：右对齐布局，展示"总票价："标签及金额数值（橙色加粗）。
         - 操作按钮组：
           - "取消订单"：白底灰字样式。
           - "网上支付"：橙底白字样式，点击后状态变更为"处理中..."。
      4. 温馨提示面板：
         - 容器样式：浅黄色背景搭配同色系边框。
         - 内容结构：标题"温馨提示："，下接有序列表说明支付时限、保险条款及免责事项。
      5. 底部页脚：包含友情链接列表及官方媒体二维码矩阵。
      6. 交易取消确认弹窗（CancelOrderModal）：
         - 样式：圆角容器，蓝色渐变标题栏"交易提示"。
         - 内容：问号图标引导，加粗询问"您确认取消订单吗？"，附带取消规则说明。
         - 操作：配置"取消"（白底）与"确认"（橙底）双按钮。
      7. 支付超时提示弹窗（TimeoutModal）：
         - 样式：居中圆角容器。
         - 内容：提示文案"支付超时，请重新购票"。
         - 操作：单"确认"按钮（橙底）。
  - id: REQ-11.2
    name: 路由跳转逻辑
    description: 定义进入支付页面的前置触发条件
    scenarios:
      - id: SCN-11.2.1
        description: 购票流程流转
        given: 用户在订单填写页确认核对信息
        when: 系统完成席位分配并生成订单（状态：待支付）
        then: |
          数据库设定20分钟支付有效期。
          更新席位状态为"已被预定"。
          页面重定向至支付页，倒计时初始值为20分钟。
      - id: SCN-11.2.2
        description: 待支付订单跳转
        given: 用户访问未完成订单列表
        when: 点击目标订单的"去支付"操作
        then: 页面重定向至支付页，倒计时显示剩余有效时长。
  - id: REQ-11.3
    name: 倒计时控制逻辑
    description: 管理订单有效期的实时计算与展示
    functional_description: |
      订单总有效期设定为20分钟。
      倒计时组件每秒刷新，显示格式规范为"xx分xx秒"。
      临界状态：剩余时间<5分钟时，文字转红并叠加脉冲动画效果。
      终止状态：倒计时归零显示00分00秒，容器背景及边框转为浅红色示警。
  - id: REQ-11.4
    name: 支付请求处理
    description: 响应用户支付操作的业务逻辑
    scenarios:
      - id: SCN-11.4.1
        description: 有效期内支付
        given: 订单处于有效期内
        when: 用户触发"网上支付"操作
        then: |
          按钮状态更新为"处理中..."并锁定。
          发起支付确认接口调用。
          支付成功后重定向至购票成功页。
          更新数据库订单状态为"已支付"。
          最终确认席位锁定状态。
      - id: SCN-11.4.2
        description: 超时支付拦截
        given: 订单已过有效期（倒计时归零）
        when: 用户尝试触发"网上支付"
        then: 阻断操作并弹出超时提示弹窗，确认后重定向至车次查询页。
  - id: REQ-11.5
    name: 订单取消流程
    description: 用户主动取消订单的交互逻辑
    scenarios:
      - id: SCN-11.5.1
        description: 触发取消提示
        given: 用户点击"取消订单"按钮
        when: 系统唤起交易提示弹窗
        then: 展示确认询问文案及相关限制规则。
      - id: SCN-11.5.2
        description: 执行取消操作
        given: 用户在弹窗中确认取消
        when: 调用订单取消接口
        then: |
          用户当日取消次数累加。
          释放关联席位（重置为空闲）。
          逻辑删除订单记录。
          页面重定向至车次查询页。
      - id: SCN-11.5.3
        description: 撤销取消操作
        given: 用户在弹窗中点击取消/关闭
        when: 弹窗关闭
        then: 保持在支付页面，倒计时继续运行。
  - id: REQ-11.6
    name: 自动超时处理
    description: 页面停留期间的超时自动响应
    scenarios:
      - id: SCN-11.6.1
        description: 倒计时自然耗尽
        given: 用户停留在支付页直至超时
        when: 倒计时数值归零
        then: |
          锁定倒计时显示为"00分00秒"。
          容器背景转为浅红色示警。
          后台异步释放席位并关闭订单。
          后续任何操作尝试均触发超时提示弹窗。
  - id: REQ-11.7
    name: 待支付订单校验
    description: 存在未结订单时的业务限制
    scenarios:
      - id: SCN-11.7.1
        description: 购票请求拦截
        given: 账号下存在待支付订单
        when: 用户尝试发起新的购票请求
        then: |
          弹出提示弹窗"您还有未处理的订单..."。
          提供跳转链接引导至未完成订单页。
