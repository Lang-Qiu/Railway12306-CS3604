id: REQ-6
name: 订单填写页
functional_description: 用户填写订单信息并提交的界面与交互流程。
children:
  - id: REQ-6-1
    name: 订单填写页布局
    children:
      - id: REQ-6-1-1
        name: 整体布局
        ui_description: |
          页面背景为white（白色），整体分为五大部分，从上到下依次为：顶部导航栏区域、列车信息区域、乘客信息区域、订单提交与温馨提示区域、底部导航区域，内容区域内边距0 20px
      - id: REQ-6-1-2
        name: 顶部导航区域
        ui_description: |
          - **Logo 区域**：页面左上角为Logo区域（直接使用图片"登录页-顶部导航区域-Logo区域.png"），左侧为中国铁路12306官方Logo，logo右侧上方为黑色"中国铁路12306"、下方为灰色"12306 CHINA RAILWAY"，点击logo可跳转到12306首页
          - **欢迎信息**：Logo区域右侧为欢迎信息区域，显示黑色"欢迎登录12306"
      - id: REQ-6-1-3
        name: 列车信息区域（TrainInfoSection）
        ui_description: |
          - **整体样式**：背景white（白色），边框为#c0d7eb（浅蓝色），圆角10px，上边距20px，最大宽度1100px
          - **标题栏**：背景渐变色（从#3698d5到#1d82bd），圆角10px 10px 0px 0px，内边距5px 20px，底部边框为#8fcdec（浅蓝色），字体大小16px，字体加粗（font-weight: 500），文字颜色white（白色），字间距0.5px
          - **内容区域**：背景为#eef1fa（浅蓝色），内边距10px 20px
          - **列车基本信息**：字体大小20px，颜色#333333（深灰色），行高20px，日期、车次号、站点名称字体加粗（font-weight: 800），颜色#000000（黑色），其他文字字体大小16px，字体加粗（font-weight: 400），颜色#000000（黑色）
          - **票价与余票信息区域**：上边距12px，顶部边框为1px dashed #cecece（浅灰色虚线），间距50px
            - **座席类型标签**：字体大小14px，颜色#333333（深灰色），字体加粗（font-weight: 400）
            - **票价**：字体大小14px，颜色#ff6600（橙色），字体加粗（font-weight: 600），显示格式为"¥xx.0元"
            - **余票状态**：字体大小14px，颜色#333333（深灰色），字体加粗（font-weight: 400），显示"余票x张"或"无票"
            - **折扣信息**：字体大小14px，颜色#33a853（绿色），字体加粗（font-weight: 500）
          - **提示说明**：上边距5px，字体大小13px，颜色#0066cc（蓝色），行高20px，提示文字前有"*"标记，链接颜色#0381ff（蓝色），hover时颜色#0052a3（深蓝色），内容为"票价仅为参考，最终以实际出票为准"
      - id: REQ-6-1-4
        name: 乘客信息区域（PassengerInfoSection）
        ui_description: |
          - **整体样式**：背景white（白色），边框为#c0d7eb（浅蓝色），圆角10px，上边距20px，最大宽度1100px
          - **标题栏**：背景渐变色（从#3698d5到#1d82bd），圆角10px 10px 0px 0px，内边距5px 20px，底部边框为#8fcdec（浅蓝色），字体大小16px，字体加粗（font-weight: 500），文字颜色white（白色），字间距0.5px，标题为"乘客信息（填写说明）"，右侧为搜索框
          - **内容区域**：背景white（白色），内边距15px 20px 0 20px
          - **乘客列表容器**：下边距5px，底部边框为1px dashed #bbbbbb（浅灰色虚线）
            - **小标题**：字体大小14px，字体加粗（font-weight: 600），颜色#0066cc（蓝色），左侧有图标（👤，字体大小18px，颜色#0066cc），内容为"乘车人"
            - **乘客列表**：flex布局，flex-wrap，间距10px，内边距10px 0
              - **乘客勾选框**：复选框尺寸14px×14px，边框为#999999（灰色），选中时背景#5aabf5（蓝色），边框#5aabf5（蓝色），勾选标记为白色"✓"（字体大小12px，字体加粗），标签字体大小14px，颜色#333333（深灰色），内边距5px 15px 5px 25px，间距8px
              - **空状态提示**：内边距20px，文字颜色#999999（灰色），字体大小14px，居中对齐
          - **搜索框**（PassengerSearchBox）：位于标题栏右侧，宽度150px，高度32px，内边距6px 12px，边框为#666666（深灰色），无圆角，字体大小13px，占位符颜色#bbb（浅灰色），右侧搜索按钮宽度32px，高度32px，背景#589bdf（蓝色），hover时背景渐变色（从#6daae6到#4c93dd），图标字体大小16px，颜色white（白色）
          - **购票信息填写区域**（PurchaseInfoTable）：上边距10px，下边距15px
            - **表格整体**：边框为#b9b9b9（浅灰色），无圆角，背景white（白色）
            - **表头**：网格布局，列宽分别为40px、110px、200px、140px、160px、1fr、40px，间距8px，内边距6px 12px，背景#fdfdfd（浅灰色），底部边框为#dddddd（浅灰色），字体大小14px，字体加粗（font-weight: 400），颜色#000000（黑色），包含"序号"、"票种"、"席别"、"姓名"、"证件类型"、"证件号码"、空列（删除按钮列）
            - **表格行**（PurchaseInfoRow）：网格布局，列宽与表头一致，间距8px，内边距12px，最小高度45px，背景#eef1fa（浅蓝色），偶数行背景#f0f7ff（浅蓝色），hover时背景#e8f2fd（浅蓝色），底部边框为#e0e0e0（浅灰色）
              - **序号单元格**：字体大小14px，字体加粗（font-weight: 400），颜色#000000（黑色），居中对齐
              - **票种下拉框**：使用SelectDropdown组件，默认选中"成人票"
              - **席别下拉框**：使用SelectDropdown组件，显示格式为"席别名称（¥xx.0元）"，仅显示有票的席别
              - **姓名输入框**：只读输入框，宽度100%，内边距6px 10px，边框为#cccccc（浅灰色），圆角2px，字体大小14px，颜色#333333（深灰色），背景white（白色），不可编辑
              - **证件类型下拉框**：使用SelectDropdown组件，默认"居民身份证"，不可修改
              - **证件号码输入框**：只读输入框，显示脱敏后的证件号码（格式：前4位+************+后4位），样式与姓名输入框相同
              - **删除按钮**：尺寸22px×22px，圆形（border-radius: 50%），背景#ff6600（橙色），文字white（白色），字体大小14px，字体加粗，hover时背景#ff5500（深橙色），缩放1.1
            - **空状态提示**：内边距30px，文字颜色#999999（灰色），字体大小13px，居中对齐，背景white（白色）
          - **中国铁路保险横幅**：宽度100%，直接使用图片"/images/order.jpg"
      - id: REQ-6-1-5
        name: 订单提交与温馨提示区域
        ui_description: |
          - **订单提交区域**（OrderSubmitSection）：背景透明，上边距20px，最大宽度1100px
            - **提示文字**：下边距15px，字体大小12px，颜色#000000（黑色），链接颜色#0066cc（蓝色），带下划线，hover时颜色#0052a3（深蓝色），内容为"提交订单表示阅读并同意《中国集团铁路旅客运输规程》《服务条款》"
            - **操作按钮**：flex布局，居中对齐，间距50px
              - **"上一步"按钮**：宽度180px，高度40px，内边距0px 10px，背景white（白色），文字颜色#333333（深灰色），边框为#c0c0c0（浅灰色），圆角3px，字体大小16px，字体加粗（font-weight: 500），hover时背景#f5f5f5（浅灰色），边框#999999（灰色），点击回到车次列表页
              - **"提交订单"按钮**：宽度180px，高度40px，内边距0px 10px，背景#fd8100（橙色），文字white（白色），圆角3px，字体大小16px，字体加粗（font-weight: 500），hover时背景#ff921d（浅橙色），禁用时透明度0.5，不可点击
          - **温馨提示区域**（WarmTipsSection）：背景为#fffbe5（浅黄色），边框为#f5e6a8（浅黄色边框），圆角10px，内边距10px 15px，上边距20px，最大宽度1100px
            - **标题**：字体大小15px，字体加粗（font-weight: 700），颜色#333333（深灰色），下边距5px
            - **提示列表**：有序列表，左内边距15px，列表项字体大小14px，颜色#404040（深灰色），行高22px，下边距2px，链接颜色#0073e7（蓝色），hover时颜色#0052a3（深蓝色）
      - id: REQ-6-1-6
        name: 底部导航区域
        ui_description: |
          - **底部导航**：左侧为友情链接，右侧为四个官方平台的二维码，分别为"中国铁路官方微信"（直接使用图片二维码"中国铁路官方微信二维码.png"）、"中国铁路官方微博"（直接使用图片二维码"中国铁路官方微博二维码.png"）、"12306 公众号"（直接使用图片二维码"12306公众号二维码.png"）、"铁路 12306"（直接使用图片二维码"铁路12306二维码.png"）

  - id: REQ-6-2
    name: “席别”默认设置
    children:
      - id: REQ-6-2-1
        name: G字头城际列车
        scenarios:
          - name: 用户为G字头城际列车购票
            steps:
              - action: 用户选择了G字头车次进行购票
                expectation: 系统就绪
              - action: 系统加载购票页面
                expectation: 页面购票信息区域的“席位”下拉框自动选择“二等座（¥xx元）”
      - id: REQ-6-2-2
        name: C字头城际列车
        scenarios:
          - name: 用户为C字头城际列车购票
            steps:
              - action: 用户选择了C字头车次进行购票
                expectation: 系统就绪
              - action: 系统加载购票页面
                expectation: 页面购票信息区域的“席位”下拉框自动选择“二等座（¥xx元）”
      - id: REQ-6-2-3
        name: D字头车次
        scenarios:
          - name: 用户选择D字头车次进行购票
            steps:
              - action: 用户选择了D字头车次进行购票
                expectation: 系统就绪
              - action: 系统加载购票页面
                expectation: 页面购票信息区域的“席位”下拉框自动选择“二等座（¥xx元）”

  - id: REQ-6-3
    name: 用户选择乘车人
    children:
      - id: REQ-6-3-1
        name: 勾选乘车人
        scenarios:
          - name: 用户从列表中勾选一名乘车人（未选过）
            steps:
              - action: 用户在**订单填写页**且已未勾选乘车人
                expectation: 系统就绪
              - action: 用户点击某个乘车人前的勾选栏
                expectation: 系统为该乘车人自动填充购票信息填写区域的序号为1的购票信息行；该行的“姓名”、“证件类型”、“证件号码”自动填充且不可修改
          - name: 用户从列表中勾选一名乘车人（已选过至少一人）
            steps:
              - action: 用户在**订单填写页**且已勾选至少一个乘车人
                expectation: 系统就绪
              - action: 用户点击某个乘车人前的勾选栏
                expectation: 系统自动为该乘车人添加一个的购票信息行；该行的“姓名”、“证件类型”、“证件号码”自动填充且不可修改
      - id: REQ-6-3-2
        name: 手动输入乘车人
        scenarios:
          - name: 用户尝试手动输入乘车人姓名
            steps:
              - action: 用户在**订单填写页**
                expectation: 系统就绪
              - action: 用户点击“姓名”输入框并尝试输入文字
                expectation: 系统不响应任何输入，输入框内容无变化
      - id: REQ-6-3-3
        name: 取消勾选乘车人
        scenarios:
          - name: 用户取消勾选已选乘车人（只剩一人）
            steps:
              - action: 用户已勾选一个乘车人
                expectation: 系统就绪
              - action: 用户再次点击该乘车人前的复选框，取消勾选
                expectation: 系统移除序号为1的购票信息行中该乘车人的信息，恢复至默认状态
          - name: 用户取消勾选已选乘车人（多人）
            steps:
              - action: 用户已勾选至少两个乘车人
                expectation: 系统就绪
              - action: 用户再次点击该乘车人前的复选框，取消勾选
                expectation: 系统移除为该乘车人添加的乘车人信息行，其他乘车人信息行内容保持不变，序号自动做出调整

  - id: REQ-6-4
    name: 用户选择席位
    children:
      - id: REQ-6-4-1
        name: 展开席位下拉菜单
        scenarios:
          - name: 用户展开席位下拉菜单
            steps:
              - action: 用户在**订单填写页**
                expectation: 系统就绪
              - action: 用户点击该行的“席别”下拉菜单
                expectation: 下拉菜单中仅显示当前有票的席位及其价格；已售罄的席位不会出现在选项中
      - id: REQ-6-4-2
        name: 更改席位选择
        scenarios:
          - name: 用户更改席位选择
            steps:
              - action: 系统已为乘车人默认选择席别
                expectation: 系统就绪
              - action: 用户从“席别”下拉菜单中选择其他席别
                expectation: 该乘车人的席位变更为用户选择的席别，票价信息随之更新

  - id: REQ-6-5
    name: 用户提交订单
    children:
      - id: REQ-6-5-1
        name: 未选择乘车人提交
        scenarios:
          - name: 用户未选择任何乘车人点击"提交订单"
            steps:
              - action: 用户在**订单填写页**，未在**乘客信息区域**勾选任何**乘车人**
                expectation: 系统就绪
              - action: 用户点击"提交订单"按钮
                expectation: 系统弹出确认弹窗，提示"请选择乘车人！"；弹窗包含"确认"按钮，点击可关闭弹窗
      - id: REQ-6-5-2
        name: 提交时车票售罄
        scenarios:
          - name: 用户提交订单时车票售罄
            steps:
              - action: 用户在**订单填写页**，并已勾选至少一名乘车人
                expectation: 系统就绪
              - action: 用户网络正常
                expectation: 系统就绪
              - action: 用户点击**提交订单**按钮
                expectation: 系统就绪
              - action: 系统发现该车次该席别车票已经售罄或余票不足
                expectation: 系统弹出确认弹窗，提示"手慢了，该车次席别车票已售罄！"；弹窗包含"确认"按钮，点击可关闭弹窗并返回**车票查询界面**
      - id: REQ-6-5-3
        name: 成功提交订单
        scenarios:
          - name: 用户选择乘车人后成功提交订单
            steps:
              - action: 用户在**订单填写页**，并已勾选至少一名乘车人
                expectation: 系统就绪
              - action: 用户网络正常
                expectation: 系统就绪
              - action: 用户点击"提交订单"按钮
                expectation: 系统就绪
              - action: 系统确认信息且车票未售罄
                expectation: 页面在100ms之内跳出**信息核对弹窗**
      - id: REQ-6-5-4
        name: 提交时网络异常
        scenarios:
          - name: 用户提交订单时网络异常
            steps:
              - action: 用户在**订单填写页**，并已勾选至少一名乘车人
                expectation: 系统就绪
              - action: 用户网络异常
                expectation: 系统就绪
              - action: 用户点击**提交订单**按钮
                expectation: 系统弹出确认弹窗，提示"网络忙，请稍后再试。"；弹窗包含"确认"按钮，点击可关闭提示弹窗，回到**购票页面**

  - id: REQ-6-6
    name: 信息核对弹窗（OrderConfirmationModal）
    children:
      - id: REQ-6-6-1
        name: 信息核对弹窗布局
        ui_description: |
          - **整体布局**：弹窗覆盖整个页面，背景遮罩为rgba(0, 0, 0, 0.5)（半透明黑色），弹窗宽度90%，最大宽度800px，最大高度85vh，背景white（白色），无圆角，阴影0 8px 24px rgba(0, 0, 0, 0.3)，标题区域为蓝色背景，内容为"请核对以下信息"，主体区域为白色背景以信息核对表格为中心。上方为**车次与出行信息区**，中间为**乘客信息区**，下方为**余票信息与操作按钮区**
          - **标题栏**：背景渐变色，标题文字"请核对以下信息"，关闭按钮
          - **车次与出行信息区**：显示列车日期、车次号、出发时间、出发/到达站等
          - **乘客信息区**：表格显示乘车人信息（序号、席别、票种、姓名、证件类型、证件号码），显示积分信息，显示"系统将随机为您申请席位，暂不支持自选席位"说明文字
          - **余票信息与操作按钮区**：显示余票信息（高亮显示），包含"返回修改"和"确认"按钮
      - id: REQ-6-6-2
        name: 用户核对信息
        scenarios:
          - name: 用户点击“返回修改”按钮
            steps:
              - action: 用户在成功提交订单后跳转至**信息核对弹窗**
                expectation: 系统就绪
              - action: 用户点击“返回修改”按钮
                expectation: 系统回到**订单填写页**
          - name: 用户点击“确认”按钮
            steps:
              - action: 用户在成功提交订单后跳转至**信息核对弹窗**
                expectation: 系统就绪
              - action: 用户点击“确认”按钮
                expectation: 页面弹出提示：订单已经提交，系统正在处理中，请稍等；系统为用户保留座位预定信息，弹出提示：购买成功，并显示用户预定的车票信息（包括座位号）；将**数据库**中该座位状态标记为**已被预定**
